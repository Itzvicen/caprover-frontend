(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[0],{477:function(e,t){},689:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(48),r=a.n(s),o=a(10),c=a(11),l=a(15),d=a(14),p=a(157),u=a(52),h=a(82),j=a(34),b=a(163),m=a(340),f=a(129),g=a(68),O=a(53),v=a(705),x=a(695),y=a(347),k=a(701),D=a(64),C=a(697),S=a(207),T=a(56),A=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"init",value:function(){}},{key:"captureException",value:function(e){(e=e||"NULL")instanceof Error||(e=new Error(e+""))}},{key:"captureMessage",value:function(e){}}]),e}(),R=void 0,P=function(){return R||(R=new A),R},N=new(function(){function e(){Object(o.a)(this,e),this.OKAY=100,this.OKAY_BUILD_STARTED=101,this.OK_PARTIALLY=102,this.STATUS_ERROR_GENERIC=1e3,this.STATUS_ERROR_CAPTAIN_NOT_INITIALIZED=1001,this.STATUS_ERROR_USER_NOT_INITIALIZED=1101,this.STATUS_ERROR_NOT_AUTHORIZED=1102,this.STATUS_ERROR_ALREADY_EXIST=1103,this.STATUS_ERROR_BAD_NAME=1104,this.STATUS_WRONG_PASSWORD=1105,this.STATUS_AUTH_TOKEN_INVALID=1106,this.VERIFICATION_FAILED=1107,this.ILLEGAL_OPERATION=1108,this.BUILD_ERROR=1109,this.ILLEGAL_PARAMETER=1110,this.NOT_FOUND=1111,this.AUTHENTICATION_FAILED=1112,this.STATUS_PASSWORD_BACK_OFF=1113,this.UNKNOWN_ERROR=1999}return Object(c.a)(e,[{key:"createError",value:function(e,t){var a=new Error(t||"null");return a.captainStatus=e,a.captainMessage=t,a}},{key:"eatUpPromiseRejection",value:function(){return function(e){P().captureException(e)}}}]),e}()),w=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"log",value:function(e){console.log(e)}},{key:"error",value:function(e){console.error(e)}},{key:"dev",value:function(e){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IS_DEBUG&&console.log(">>> ",e)}}]),e}(),I={getItem:function(e){return""},setItem:function(e,t){}},E=window.localStorage?window.localStorage:I,L=window.sessionStorage?window.sessionStorage:I,M="CAPROVER_AUTH_KEY",U="CAPROVER_SIDER_COLLAPSED_STATE",B="CAPROVER_DARK_MODE",V=new(function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"getAuthKeyFromStorage",value:function(){var e=E.getItem(M);return e||(L.getItem(M)||"")}},{key:"clearAuthKeys",value:function(){E.setItem(M,""),L.setItem(M,"")}},{key:"setAuthKeyInSessionStorage",value:function(e){L.setItem(M,e),E.setItem(M,"")}},{key:"setAuthKeyInLocalStorage",value:function(e){E.setItem(M,e),L.setItem(M,"")}},{key:"setSiderCollapsedStateInLocalStorage",value:function(e){E.setItem(U,JSON.stringify(e))}},{key:"getSiderCollapsedStateFromLocalStorage",value:function(){var e=E.getItem(U);return e&&JSON.parse(e)}},{key:"setDarkModeInLocalStorage",value:function(e){E.setItem(B,JSON.stringify(e))}},{key:"getDarkModeFromLocalStorage",value:function(){var e=E.getItem(B);return e?JSON.parse(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}}]),e}()),_=a(244),H=a.n(_),F=function(){function e(t,a){Object(o.a)(this,e),this.baseUrl=t,this.onAuthFailure=a,this.GET="GET",this.POST="POST",this.isDestroyed=!1,this.authToken=""}return Object(c.a)(e,[{key:"createHeaders",value:function(){var e={};return this.authToken&&(e["x-captain-auth"]=this.authToken),e["x-namespace"]="captain",e}},{key:"setAuthToken",value:function(e){this.authToken=e}},{key:"destroy",value:function(){this.isDestroyed=!0}},{key:"fetch",value:function(e,t,a){var n=this;return function(){return Promise.resolve().then((function(){return Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IS_DEBUG?new Promise((function(e){setTimeout(e,500)})):Promise.resolve()})).then((function(){return n.fetchInternal(e,t,a)})).then((function(i){var s=i.data;return s.status===N.STATUS_AUTH_TOKEN_INVALID?n.onAuthFailure().then((function(){return n.fetchInternal(e,t,a).then((function(e){return e.data}))})):s})).then((function(e){if(e.status!==N.OKAY&&e.status!==N.OK_PARTIALLY&&e.status!==N.OKAY_BUILD_STARTED)throw N.createError(e.status||N.UNKNOWN_ERROR,e.description||"");return e})).then((function(e){return new Promise((function(t,a){if(!n.isDestroyed)return t(e.data);w.dev("Destroyed then not called")}))})).catch((function(e){return w.error(e),new Promise((function(t,a){if(!n.isDestroyed)return a(e);w.dev("Destroyed catch not called")}))}))}}},{key:"fetchInternal",value:function(e,t,a){if(e===this.GET)return this.getReq(t,a);if(e===this.POST)return this.postReq(t,a);throw new Error("Unknown method: ".concat(e))}},{key:"getReq",value:function(e,t){return H.a.get(this.baseUrl+e,{params:t,headers:this.createHeaders()}).then((function(e){return e}))}},{key:"postReq",value:function(e,t){return H.a.post(this.baseUrl+e,t,{headers:this.createHeaders()}).then((function(e){return e}))}}]),e}(),z=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL.replace(/\/$/,""):"")+"/api/v2";w.dev("API URL: ".concat(z));var W=function(){function e(){Object(o.a)(this,e),this.http=void 0;var t=this;this.http=new F(z,(function(){return e.lastKnownPassword?t.getAuthToken(e.lastKnownPassword):(e.authToken&&(t.setAuthToken(""),setTimeout((function(){window.location.href=window.location.href.split("#")[0]}),200)),Promise.reject(new Error("No saved password. Ignore if initial call.")))})),this.http.setAuthToken(e.authToken)}return Object(c.a)(e,[{key:"getApiBaseUrl",value:function(){return z}},{key:"destroy",value:function(){this.http.destroy()}},{key:"setAuthToken",value:function(t){e.authToken=t,t||V.clearAuthKeys(),this.http.setAuthToken(t)}},{key:"getAuthToken",value:function(t){var a=this.http;e.lastKnownPassword=t;var n=this;return Promise.resolve().then(a.fetch(a.POST,"/login",{password:t})).then((function(e){n.setAuthToken(e.token)})).catch((function(t){return t.captainStatus+""!==N.STATUS_PASSWORD_BACK_OFF+""&&t.captainStatus+""!==N.STATUS_WRONG_PASSWORD+""||(n.setAuthToken(""),e.lastKnownPassword=""),Promise.reject(t)}))}},{key:"getCaptainInfo",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/system/info",{}))}},{key:"updateRootDomain",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/system/changerootdomain",{rootDomain:e,force:t}))}},{key:"enableRootSsl",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/system/enablessl",{emailAddress:e}))}},{key:"forceSsl",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/system/forcessl",{isEnabled:e}))}},{key:"getAllApps",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/apps/appDefinitions",{}))}},{key:"fetchBuildLogs",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.GET,"/user/apps/appData/".concat(e),{}))}},{key:"fetchAppLogsInHex",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.GET,"/user/apps/appData/".concat(e,"/logs?encoding=hex"),{}))}},{key:"uploadAppData",value:function(e,t){var a=this.http,n=new FormData;return n.append("sourceFile",t),Promise.resolve().then(a.fetch(a.POST,"/user/apps/appData/".concat(e,"?detached=1"),n))}},{key:"uploadCaptainDefinitionContent",value:function(e,t,a,n){var i=this.http;return Promise.resolve().then(i.fetch(i.POST,"/user/apps/appData/".concat(e).concat(n?"?detached=1":""),{captainDefinitionContent:JSON.stringify(t),gitHash:a}))}},{key:"updateConfigAndSave",value:function(e,t){var a=t.instanceCount,n=t.captainDefinitionRelativeFilePath,i=t.envVars,s=t.notExposeAsWebApp,r=t.forceSsl,o=t.websocketSupport,c=t.volumes,l=t.ports,d=t.nodeId,p=t.appPushWebhook,u=t.customNginxConfig,h=t.preDeployFunction,j=t.serviceUpdateOverride,b=t.containerHttpPort,m=t.description,f=t.httpAuth,g=t.appDeployTokenConfig,O=this.http;return Promise.resolve().then(O.fetch(O.POST,"/user/apps/appDefinitions/update",{appName:e,instanceCount:a,captainDefinitionRelativeFilePath:n,notExposeAsWebApp:s,forceSsl:r,websocketSupport:o,volumes:c,ports:l,customNginxConfig:u,appPushWebhook:p,nodeId:d,preDeployFunction:h,serviceUpdateOverride:j,containerHttpPort:b,description:m,httpAuth:f,envVars:i,appDeployTokenConfig:g}))}},{key:"renameApp",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/apps/appDefinitions/rename",{oldAppName:e,newAppName:t}))}},{key:"registerNewApp",value:function(e,t,a){var n=this.http;return Promise.resolve().then(n.fetch(n.POST,"/user/apps/appDefinitions/register".concat(a?"?detached=1":""),{appName:e,hasPersistentData:t}))}},{key:"deleteApp",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/apps/appDefinitions/delete",{appName:e,volumes:t}))}},{key:"enableSslForBaseDomain",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/apps/appDefinitions/enablebasedomainssl",{appName:e}))}},{key:"attachNewCustomDomainToApp",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/apps/appDefinitions/customdomain",{appName:e,customDomain:t}))}},{key:"enableSslForCustomDomain",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/apps/appDefinitions/enablecustomdomainssl",{appName:e,customDomain:t}))}},{key:"removeCustomDomain",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/apps/appDefinitions/removecustomdomain",{appName:e,customDomain:t}))}},{key:"getLoadBalancerInfo",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/system/loadbalancerinfo",{}))}},{key:"getNetDataInfo",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/system/netdata",{}))}},{key:"updateNetDataInfo",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/system/netdata",{netDataInfo:e}))}},{key:"changePass",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/changepassword",{oldPassword:e,newPassword:t}))}},{key:"getVersionInfo",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/system/versioninfo",{}))}},{key:"createBackup",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.POST,"/user/system/createbackup",{postDownloadFileName:"backup.tar"}))}},{key:"performUpdate",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/system/versioninfo",{latestVersion:e}))}},{key:"getNginxConfig",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/system/nginxconfig",{}))}},{key:"setNginxConfig",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.POST,"/user/system/nginxconfig",{baseConfig:{customValue:e},captainConfig:{customValue:t}}))}},{key:"getUnusedImages",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.GET,"/user/apps/appDefinitions/unusedImages",{mostRecentLimit:e+""}))}},{key:"deleteImages",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/apps/appDefinitions/deleteImages",{imageIds:e}))}},{key:"getDockerRegistries",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/registries",{}))}},{key:"enableSelfHostedDockerRegistry",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.POST,"/user/system/selfhostregistry/enableregistry",{}))}},{key:"disableSelfHostedDockerRegistry",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.POST,"/user/system/selfhostregistry/disableregistry",{}))}},{key:"addDockerRegistry",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/registries/insert",Object(T.a)({},e)))}},{key:"updateDockerRegistry",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/registries/update",Object(T.a)({},e)))}},{key:"deleteDockerRegistry",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/registries/delete",{registryId:e}))}},{key:"setDefaultPushDockerRegistry",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/registries/setpush",{registryId:e}))}},{key:"forceBuild",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,e,{}))}},{key:"getAllNodes",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/system/nodes",{}))}},{key:"getAllOneClickApps",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/oneclick/template/list",{}))}},{key:"getOneClickAppByName",value:function(e,t){var a=this.http;return Promise.resolve().then(a.fetch(a.GET,"/user/oneclick/template/app",{appName:e,baseDomain:t}))}},{key:"getAllOneClickAppRepos",value:function(){var e=this.http;return Promise.resolve().then(e.fetch(e.GET,"/user/oneclick/repositories",{}))}},{key:"addNewCustomOneClickRepo",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/oneclick/repositories/insert",{repositoryUrl:e}))}},{key:"deleteCustomOneClickRepo",value:function(e){var t=this.http;return Promise.resolve().then(t.fetch(t.POST,"/user/oneclick/repositories/delete",{repositoryUrl:e}))}},{key:"addDockerNode",value:function(e,t,a,n,i,s){var r=this.http;return Promise.resolve().then(r.fetch(r.POST,"/user/system/nodes",{nodeType:e,privateKey:t,remoteNodeIpAddress:a,sshPort:n,sshUser:i,captainIpAddress:s}))}}],[{key:"getAuthTokenString",value:function(){return e.authToken}},{key:"isLoggedIn",value:function(){return!!e.authToken}}]),e}();W.lastKnownPassword="",W.authToken=V.getAuthKeyFromStorage()||"";var K=a(352),q=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"toast",value:function(e){var t="Something bad happened.";if(e.captainStatus){var a=e.captainMessage||t;t="".concat(e.captainStatus," : ").concat(a)}K.b.error(t),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IS_DEBUG&&console.error(e)}},{key:"createCatcher",value:function(t){return function(a){e.toast(a),t&&t()}}}]),e}(),G={copyObject:function(e){return JSON.parse(JSON.stringify(e))},generateUuidV4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},deleteAllCookies:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var a=e[t],n=a.indexOf("="),i=n>-1?a.substr(0,n):a;document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}},getAnsiColorRegex:function(){var e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,"g")},isMobile:function(){return window.innerWidth<768},isSafari:function(){var e=!1;try{e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)}catch(t){console.log(t)}return e},getDelayedPromise:function(e){return e?new Promise((function(t,a){setTimeout((function(){t()}),e)})):Promise.resolve()},createRandomStringHex:function(e){for(var t="",a="0123456789abcdef",n=a.length,i=0;i<e;i++)t+=a.charAt(Math.floor(Math.random()*n));return t},replaceAllGenRandomForOneClickApp:function(e){for(var t;(t=/\$\$cap_gen_random_hex\((\d+)\)/g.exec(e))&&2===t.length;){var a=Number(t[1]);e=a>256?e.replace(t[0],""):e.replace(t[0],"".concat(this.createRandomStringHex(a)))}return e},convertHexStringToUtf8:function(e){return e?decodeURIComponent(e.substring(8,e.length).replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&")):""},mergeObjects:function(e,t){var a=this,n=e||{};return t=t||{},Object.keys(t).forEach((function(e){!n[e]||Array.isArray(n[e])||Array.isArray(t[e])?n[e]=t[e]:"object"===typeof t[e]&&"object"===typeof n[e]?n[e]=a.mergeObjects(n[e],t[e]):n[e]=t[e]})),n}},Y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).willUnmountSoon=void 0,n.apiManager=void 0,n.willUnmountSoon=!1,n.apiManager=new W,n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){this.willUnmountSoon=!0,this.apiManager.destroy()}}]),a}(n.Component),J=a(1),$=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={loginOption:1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){Object(g.a)(Object(O.a)(a.prototype),"componentDidMount",this)&&Object(g.a)(Object(O.a)(a.prototype),"componentDidMount",this).call(this),G.deleteAllCookies()}},{key:"onLoginRequested",value:function(e){var t=this;this.apiManager.getAuthToken(e).then((function(){2===t.state.loginOption?V.setAuthKeyInSessionStorage(W.getAuthTokenString()):3===t.state.loginOption&&V.setAuthKeyInLocalStorage(W.getAuthTokenString()),t.props.history.push("/")})).catch(q.createCatcher())}},{key:"render",value:function(){var e=this;return W.isLoggedIn()?Object(J.jsx)(j.b,{to:"/"}):Object(J.jsx)("div",{children:Object(J.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(J.jsx)(x.a,{title:"SpaceCloud Login",style:{width:380},children:Object(J.jsx)(Q,{onLoginRequested:function(t,a){e.setState({loginOption:a}),e.onLoginRequested(t)}})})})})}}]),a}(Y),X={display:"block",height:"30px",lineHeight:"30px"},Q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=Object(f.a)(n);e.props.onLoginRequested(e.state.passwordEntered,e.state.loginOption)},n.state={loginOption:1,passwordEntered:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[Object(J.jsx)(y.a.Password,{onKeyDown:function(t){13===t.keyCode&&e.handleSubmit()},prefix:Object(J.jsx)(v.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){e.setState({passwordEntered:"".concat(t.target.value)})},placeholder:"Contrase\xf1a",autoFocus:!0}),Object(J.jsx)("div",{style:{marginTop:20,marginBottom:20},children:Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:function(){e.handleSubmit()},children:"Iniciar sesi\xf3n"})})}),Object(J.jsx)(C.a,{children:Object(J.jsx)(C.a.Panel,{header:"Recuerdame",children:Object(J.jsxs)(S.a.Group,{onChange:function(t){console.log(t.target.value),e.setState({loginOption:t.target.value})},value:e.state.loginOption,children:[Object(J.jsx)(S.a,{style:X,value:1,children:"Sin persistencia de la sesi\xf3n (Seguro)"}),Object(J.jsx)(S.a,{style:X,value:2,children:"Usar almacenamiento de sesi\xf3n"}),Object(J.jsx)(S.a,{style:X,value:3,children:"Usar almacenamiento local (Persist.)"})]})},"1")})]})}}]),a}(i.a.Component),Z=a(733),ee=a(718),te=a(734),ae=a(726),ne=a(735),ie=a(736),se=a(354),re=a(737),oe=a(738),ce=a(739),le=a(692),de=a(702),pe=a(206),ue="ROOT_KEY_CHANGED",he="SIZE_CHANGED";var je=a(71),be=a(713),me=a(714),fe=a(355),ge=a(715),Oe=a(346),ve=a(696),xe=a(704),ye=a(149),ke=a(112),De=a(353),Ce=a(700),Se=a(6),Te=a.n(Se),Ae=a(74),Re=a(342),Pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=Object(J.jsx)(Ae.a,{style:{fontSize:32},spin:!0});return Object(J.jsx)("div",{style:{width:"100%",textAlign:"center"},children:Object(J.jsx)(Re.a,{style:{marginTop:60,marginBottom:60,width:"100%"},indicator:e,size:"large"})})}}]),a}(n.Component),Ne=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onLinkClicked&&this.props.onLinkClicked()}},{key:"render",value:function(){var e=this;return Object(J.jsx)("a",{onClick:function(t){return e.handleClick(t)},children:this.props.children})}}]),a}(n.Component),we=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{style:{textAlign:"center",padding:36},children:[Object(J.jsx)("p",{children:"A ocurrido un error. Por favor, intentalo de nuevo"}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(D.a,{type:"primary",onClick:function(){e.props.emitRootKeyChanged()},children:"Recargar"})})]})}}]),a}(n.Component),Ie=Object(u.b)(void 0,{emitRootKeyChanged:function(){return{type:ue,payload:{}}}})(we),Ee=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)("a",{href:this.props.url,target:"_blank",rel:"noopener noreferrer",children:this.props.children})}}]),a}(n.Component),Le=a(141),Me=a(703),Ue=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={dummyVar:void 0,forceEditableInstanceCount:!1,envVarBulkEdit:!1,bulkVals:"",forceEditableNodeId:!1},n}return Object(c.a)(a,[{key:"parseEnvVars",value:function(e){var t={};return e.toString().split("\n").forEach((function(e,a){var n=e.match(/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/);if(n){var i=n[1],s=n[2]||"",r=s?s.length:0;r>0&&'"'===s.charAt(0)&&'"'===s.charAt(r-1)&&(s=s.replace(/\\n/gm,"\n")),s=s.replace(/(^['"]|['"]$)/g,"").trim(),t[i]=s}})),t}},{key:"convertEnvVarsToBulk",value:function(e){return e.map((function(e){var t=e.value;return t.indexOf("\n")>=0&&(t='"'.concat(t.split("\n").join("\\n"),'"')),"".concat(e.key,"=").concat(t)})).join("\n")}},{key:"createEnvVarSection",value:function(){var e=this,t=this.props.apiData.appDefinition.envVars||[];if(e.state.envVarBulkEdit)return Object(J.jsx)("div",{children:Object(J.jsx)(k.a,{style:{paddingBottom:12},children:Object(J.jsx)(de.a,{span:24,children:Object(J.jsx)(y.a.TextArea,{className:"code-input",placeholder:"key1=value1\nkey2=value2",rows:7,value:e.state.bulkVals?e.state.bulkVals:e.convertEnvVarsToBulk(t),onChange:function(t){var a=G.copyObject(e.props.apiData),n=e.parseEnvVars(t.target.value),i=[];Object.keys(n).forEach((function(e){i.push({key:e,value:n[e]})})),a.appDefinition.envVars=i,e.props.updateApiData(a),e.setState({bulkVals:t.target.value})}})})})});var a=t.map((function(t,a){return Object(J.jsxs)(k.a,{style:{paddingBottom:12},children:[Object(J.jsx)(de.a,{span:8,children:Object(J.jsx)(y.a,{className:"code-input",placeholder:"key",value:t.key,type:"text",onChange:function(t){var n=G.copyObject(e.props.apiData);n.appDefinition.envVars[a].key=t.target.value,e.props.updateApiData(n)}})}),Object(J.jsx)(de.a,{style:{paddingLeft:12},span:16,children:Object(J.jsx)(y.a.TextArea,{className:"code-input",placeholder:"value",rows:1,value:t.value,onChange:function(t){var n=G.copyObject(e.props.apiData);n.appDefinition.envVars[a].value=t.target.value,e.props.updateApiData(n)}})})]},"".concat(a))}));return Object(J.jsxs)("div",{children:[a,Object(J.jsx)("br",{}),Object(J.jsx)(D.a,{block:this.props.isMobile,type:"default",onClick:function(){return e.addEnvVarClicked()},children:"Add Key/Value Pair"})]})}},{key:"createPortRows",value:function(){var e=this;return(this.props.apiData.appDefinition.ports||[]).map((function(t,a){return Object(J.jsxs)(k.a,{style:{paddingBottom:12},children:[Object(J.jsx)(de.a,{span:12,children:Object(J.jsx)(ke.a,{title:"Make sure the port is not already used!",children:Object(J.jsx)(y.a,{addonBefore:"Server Port",placeholder:"5050",value:t.hostPort?t.hostPort+"":"",type:"number",onChange:function(t){var n=G.copyObject(e.props.apiData),i=Number(t.target.value.trim());n.appDefinition.ports[a].hostPort=i>0?i:0,e.props.updateApiData(n)}})})}),Object(J.jsx)(de.a,{style:{paddingLeft:12},span:12,children:Object(J.jsx)(y.a,{addonBefore:"Container Port",placeholder:"6060",value:t.containerPort?t.containerPort+"":"",onChange:function(t){var n=G.copyObject(e.props.apiData),i=Number(t.target.value.trim());n.appDefinition.ports[a].containerPort=i>0?i:0,e.props.updateApiData(n)}})})]},"".concat(a))}))}},{key:"createVolRows",value:function(){var e=this;return(this.props.apiData.appDefinition.volumes||[]).map((function(t,a){return Object(J.jsxs)(k.a,{style:{paddingBottom:12},children:[Object(J.jsx)(de.a,{span:8,children:Object(J.jsx)(y.a,{addonBefore:"Path in App",className:"code-input",placeholder:"/var/www/html",value:t.containerPath,type:"text",onChange:function(t){var n=G.copyObject(e.props.apiData);n.appDefinition.volumes[a].containerPath=t.target.value,e.props.updateApiData(n)}})}),Object(J.jsx)(de.a,{style:{paddingLeft:12},span:8,className:t.hostPath?"hide-on-demand":"",children:Object(J.jsx)(y.a,{addonBefore:"Label",className:"code-input",placeholder:"some-name",value:t.volumeName,onChange:function(t){var n=G.copyObject(e.props.apiData);n.appDefinition.volumes[a].volumeName=t.target.value,e.props.updateApiData(n)}})}),Object(J.jsx)(de.a,{style:{paddingLeft:12},span:8,className:t.hostPath?"":"hide-on-demand",children:Object(J.jsx)(ke.a,{title:"IMPORTANT: Ensure Host Path exists before assigning it here",children:Object(J.jsx)(y.a,{addonBefore:"Path on Host",className:"code-input",placeholder:"/host/path/exists",value:t.hostPath,onChange:function(t){var n=G.copyObject(e.props.apiData);n.appDefinition.volumes[a].hostPath=t.target.value,e.props.updateApiData(n)}})})}),Object(J.jsx)(de.a,{style:{paddingLeft:12},span:8,children:Object(J.jsx)(D.a,{type:"dashed",onClick:function(){var t=G.copyObject(e.props.apiData);t.appDefinition.volumes[a].hostPath=t.appDefinition.volumes[a].hostPath?"":"/",e.props.updateApiData(t)},children:t.hostPath?"Let CapRover manage path":"Set specific host path"})})]},"".concat(a))}))}},{key:"createVolSection",value:function(){var e=this,t=this,a=this.props.apiData.appDefinition;return a.hasPersistentData?Object(J.jsxs)("div",{children:[Object(J.jsxs)("h4",{children:["Persistent Directories \xa0",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/app-configuration.html#persistent-or-not",children:Object(J.jsx)(Le.a,{})})]}),Object(J.jsx)("div",{className:a.volumes&&a.volumes.length?"hide-on-demand":"",children:Object(J.jsx)("i",{children:"Currently, this app does not have any persistent directories."})}),this.createVolRows(),Object(J.jsx)("br",{}),Object(J.jsx)(D.a,{type:"default",onClick:function(){return e.addVolumeClicked()},children:"Add Persistent Directory"}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(de.a,{span:6,style:{minWidth:this.props.isMobile?"100%":300},children:Object(J.jsx)(ke.a,{title:"Leave empty for automatic placement",children:Object(J.jsx)(y.a,{addonBefore:"Node ID",className:"code-input",value:a.nodeId?a.nodeId:"",disabled:!this.state.forceEditableNodeId,onChange:function(e){var a=G.copyObject(t.props.apiData);a.appDefinition.nodeId=e.target.value,t.props.updateApiData(a)}})})}),Object(J.jsx)(de.a,{span:12,style:{paddingLeft:24},children:Object(J.jsx)(ke.a,{title:"WARNING: Changing Node ID causes the content of your persistent directories to be deleted!",children:Object(J.jsx)(D.a,{type:"default",disabled:this.state.forceEditableNodeId,onClick:function(){return e.setState({forceEditableNodeId:!0})},children:"Edit"})})})]}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]}):Object(J.jsx)("div",{})}},{key:"render",value:function(){var e=this,t=this,a=this.props.apiData.appDefinition;return Object(J.jsxs)("div",{children:[Object(J.jsxs)("h4",{children:["Environmental Variables \xa0",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/app-configuration.html#environment-variables",children:Object(J.jsx)(Le.a,{})})]}),Object(J.jsx)(k.a,{align:"middle",justify:"end",children:Object(J.jsxs)("h5",{children:["Bulk Edit\xa0"," ",Object(J.jsx)(Me.a,{onChange:function(e){t.setState({envVarBulkEdit:e,bulkVals:""})}})]})}),Object(J.jsx)("div",{className:a.envVars&&a.envVars.length?"hide-on-demand":"",children:Object(J.jsx)("i",{children:"Currently, this app does not have any custom environmental variables yet."})}),this.createEnvVarSection(),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsxs)("h4",{children:["Port Mapping \xa0",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/app-configuration.html#port-mapping",children:Object(J.jsx)(Le.a,{})})]}),Object(J.jsx)("div",{className:a.ports&&a.ports.length?"hide-on-demand":"",children:Object(J.jsx)("i",{children:"Currently, this app does not have any custom port mapping."})}),this.createPortRows(),Object(J.jsx)("br",{}),Object(J.jsx)(D.a,{block:this.props.isMobile,type:"default",onClick:function(){return e.addPortMappingClicked()},children:"Add Port Mapping"}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),this.createVolSection(),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(de.a,{span:6,style:{minWidth:this.props.isMobile?"100%":300},children:Object(J.jsx)(ke.a,{title:"Number of running instances of this app",children:Object(J.jsx)(y.a,{addonBefore:"Instance Count",type:"number",defaultValue:a.instanceCount+"",disabled:a.hasPersistentData&&!this.state.forceEditableInstanceCount,onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.instanceCount=Number(t.target.value),e.props.updateApiData(a)}})})}),Object(J.jsx)(de.a,{span:6,children:Object(J.jsx)("div",{style:{paddingLeft:24},className:a.hasPersistentData?"":"hide-on-demand",children:Object(J.jsx)(ke.a,{title:"Multiple instances of apps with persistent data can be very dangerous and bug prone as they can be accessing the same file on the disk resulting in data corruption. Edit the instance count only if you understand the risk.",children:Object(J.jsx)(D.a,{type:"default",disabled:this.state.forceEditableInstanceCount,onClick:function(){return e.setState({forceEditableInstanceCount:!0})},children:"Edit"})})})})]}),Object(J.jsx)("div",{style:{height:50}}),Object(J.jsx)(k.a,{children:Object(J.jsxs)(de.a,{span:24,children:[Object(J.jsxs)("h4",{children:["Pre-Deploy Script",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/pre-deploy-script.html",children:Object(J.jsx)(Le.a,{style:{paddingLeft:10}})})]}),Object(J.jsx)(y.a.TextArea,{spellCheck:!1,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",className:"code-input",placeholder:"var preDeployFunction = function (capRoverAppObj, dockerUpdateObject) ...",rows:4,value:a.preDeployFunction?a.preDeployFunction:"",onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.preDeployFunction=t.target.value,e.props.updateApiData(a)}})]})}),Object(J.jsx)("div",{style:{height:30}}),Object(J.jsx)(k.a,{children:Object(J.jsxs)(de.a,{span:24,children:[Object(J.jsxs)("h4",{children:["Service Update Override",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/service-update-override.html",children:Object(J.jsx)(Le.a,{style:{paddingLeft:10}})})]}),Object(J.jsx)(y.a.TextArea,{spellCheck:!1,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",className:"code-input",placeholder:'## JSON / YAML\n{\n  "TaskTemplate": {\n    "ContainerSpec": {\n    "Image": "busybox",\n    "Args": [\n        "top"\n    ]....',rows:4,value:a.serviceUpdateOverride?a.serviceUpdateOverride:"",onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.serviceUpdateOverride=t.target.value,e.props.updateApiData(a)}})]})})]})}},{key:"addPortMappingClicked",value:function(){var e=G.copyObject(this.props.apiData);e.appDefinition.ports=e.appDefinition.ports||[],e.appDefinition.ports.push({containerPort:0,hostPort:0}),this.props.updateApiData(e)}},{key:"addEnvVarClicked",value:function(){var e=G.copyObject(this.props.apiData);e.appDefinition.envVars=e.appDefinition.envVars||[],e.appDefinition.envVars.push({key:"",value:""}),this.props.updateApiData(e)}},{key:"addVolumeClicked",value:function(){var e=G.copyObject(this.props.apiData);e.appDefinition.volumes=e.appDefinition.volumes||[],e.appDefinition.volumes.push({containerPath:"",volumeName:""}),this.props.updateApiData(e)}},{key:"reFetchData",value:function(){this.props.reFetchData()}}]),a}(n.Component),Be=a(712),Ve=a(344),_e=a.n(Ve);function He(e,t){window.scrollTo(0,e),t.scrollTo({top:e,behavior:"smooth"})}var Fe=function(e){var t=document.getElementById("main-content-layout");(t?t.scrollTop:0)<=120||(e?setTimeout((function(){He(0,t)}),e):He(0,t))},ze=a(706),We=a(707),Ke=a(708),qe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isWrapped:!0,expandedLogs:!0,appLogsStringified:""},n}return Object(c.a)(a,[{key:"fetchLogs",value:function(){var e=this,t=["00000000","01000000","02000000","03000000"],a=G.getAnsiColorRegex();this.apiManager.fetchAppLogsInHex(this.props.appName).then((function(n){var i=n.logs.split(new RegExp(t.join("|"),"g")).map((function(e){var t=0,a=G.convertHexStringToUtf8(e);try{t=new Date(a.substring(0,30)).getTime()}catch(n){}return{text:a,time:t}})).sort((function(e,t){return e.time>t.time?1:t.time>e.time?-1:0})).map((function(e){return e.text})).join("").replace(a,"");if(i!==e.state.appLogsStringified){var s=!e.state.appLogsStringified,r=document.getElementById("applogs-text-id"),o=s||!!r&&Math.abs(r.scrollTop-(r.scrollHeight-r.offsetHeight))<100;e.setState({appLogsStringified:i}),o&&setTimeout((function(){var e=document.getElementById("applogs-text-id");e&&(e.scrollTop=e.scrollHeight)}),100)}})).catch((function(t){console.log(t),e.setState({appLogsStringified:"fetching app log failed..."})})).then((function(){setTimeout((function(){e.willUnmountSoon||e.fetchLogs()}),2200)}))}},{key:"componentDidMount",value:function(){this.fetchLogs()}},{key:"onExpandLogClicked",value:function(){this.setState({expandedLogs:!this.state.expandedLogs})}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{children:Object(J.jsxs)(k.a,{justify:"space-between",align:"middle",children:[Object(J.jsx)("span",{children:Object(J.jsxs)(k.a,{justify:"start",align:"middle",children:[Object(J.jsx)("span",{children:Object(J.jsx)(Ne,{onLinkClicked:function(){e.onExpandLogClicked()},children:Object(J.jsxs)("h4",{className:"unselectable-span",children:[this.state.expandedLogs?Object(J.jsx)(ze.a,{}):Object(J.jsx)(We.a,{}),"\xa0\xa0",this.state.expandedLogs?"Hide":"View"," ","App Logs"]})})}),Object(J.jsx)("span",{style:{marginLeft:20,paddingBottom:3},children:Object(J.jsx)(ke.a,{title:"View full application logs (not truncated)",children:Object(J.jsx)(Ee,{url:"https://caprover.com/docs/troubleshooting.html#how-to-view-my-applications-log",children:Object(J.jsx)(Le.a,{})})})})]})}),Object(J.jsx)("span",{className:this.state.expandedLogs?"":"hide-on-demand",children:Object(J.jsx)(Ne,{onLinkClicked:function(){e.setState({isWrapped:!e.state.isWrapped})},children:Object(J.jsxs)("h4",{className:"unselectable-span",children:[Object(J.jsx)(Ke.a,{}),"\xa0\xa0"," ",this.state.isWrapped?"Don't":""," ","wrap logs \xa0\xa0"]})})})]})}),Object(J.jsx)("div",{className:this.state.expandedLogs?"":"hide-on-demand",style:{padding:5},children:Object(J.jsx)("textarea",{id:"applogs-text-id",className:"logs-output",style:{whiteSpace:e.state.isWrapped?"pre-line":"pre"},value:e.state.appLogsStringified,readOnly:!0})})]})]})}}]),a}(Y),Ge=a(709),Ye=a(121),Je=a(710),$e=a(693),Xe=a(197),Qe=a.n(Xe),Ze=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.timestamp;return Object(J.jsx)(ke.a,{title:Qe()(new Date(e)).fromNow(),children:Object(J.jsx)("span",{children:new Date(e).toLocaleString()})})}}]),a}(n.Component),et=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getStateRender",value:function(e,t){var a=this;return e===this.props.deployedVersion?Object(J.jsx)(ke.a,{title:"Current Version",children:Object(J.jsx)(Ge.a,{twoToneColor:"#52c41a"})}):t.deployedImageName?Object(J.jsx)(Ne,{onLinkClicked:function(){return a.onRollbackClicked(t)},children:Object(J.jsx)(ke.a,{title:"Revert to this version",children:Object(J.jsx)("span",{children:Object(J.jsx)(Je.a,{})})})}):Object(J.jsx)(ke.a,{title:"Failed deploy",children:Object(J.jsx)(Ye.a,{})})}},{key:"getCols",value:function(){var e=this;return[{title:"State",key:"revertColumn",align:"center",dataIndex:"version",render:function(t,a){return e.getStateRender(t,a)}},{title:"Version",align:"center",dataIndex:"version"},{title:"Deploy Time",dataIndex:"timeStamp",render:function(e){return Object(J.jsx)(Ze,{timestamp:e})}},{title:"Image Name",dataIndex:"deployedImageName"},{title:"git hash",dataIndex:"gitHash",render:function(e,t){var a=e||"";return a.length>12&&(a=a.substr(0,10)+"..."),Object(J.jsx)(ke.a,{title:e,children:Object(J.jsx)("div",{className:"code-input",children:a||"n/a"})})}}]}},{key:"onRollbackClicked",value:function(e){var t=this,a=e.deployedImageName,n=Object(J.jsxs)("span",{children:["If you had previously deleted this image explicitly through disk cleanup,\n      this revert process will fail.",Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),"Do you want to continue with rolling back your app to ",Object(J.jsx)("code",{children:a}),"?"]});a.indexOf("/")>0&&(n=Object(J.jsxs)("span",{children:["".concat(a," appears to be hosted on Docker Registry.\n        Make sure you have not deleted this image from the repository since it was originally deployed.\n        Deletion usually does not happen automatically, so if you have not deleted the image intentionally,\n        you don't need to worry about this."),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),"Do you want to continue with rolling back your app to ",Object(J.jsx)("code",{children:a}),"?"]})),ve.a.confirm({title:"Rollback?",content:n,onOk:function(){t.props.onVersionRollbackRequested(e)}})}},{key:"render",value:function(){var e=this,t=G.copyObject(this.props.versions).reverse(),a=this.getCols();return Object(J.jsxs)("div",{children:[Object(J.jsx)("h3",{children:"Version History"}),Object(J.jsx)("div",{children:this.props.isMobile?t.map((function(t,a){return a<=5&&Object(J.jsxs)(x.a,{type:"inner",style:{marginBottom:8},title:Object(J.jsxs)(n.Fragment,{children:[Object(J.jsx)(ke.a,{title:Qe()(new Date(t.timeStamp)).fromNow(),children:Object(J.jsx)("span",{children:new Date(t.timeStamp).toLocaleString()})}),Object(J.jsx)("div",{children:t.deployedImageName})]}),children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Version:"})," ",t.version]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Git hash:"})," ",t.gitHash||"n/a"]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"State:"})," ",e.getStateRender(t.version,t)]})]},a)})):Object(J.jsx)($e.a,{size:"small",rowKey:"timeStamp",pagination:{pageSize:5},columns:a,dataSource:t})})]})}}]),a}(n.Component),tt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).fetchBuildLogsInterval=void 0,n.state={isAppBuilding:!1,expandedLogs:!!n.props.buildLogRecreationId,buildLogs:"",lastLineNumberPrinted:-1e4},n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this)&&Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this).call(this),this.fetchBuildLogsInterval&&clearInterval(this.fetchBuildLogsInterval)}},{key:"fetchBuildLogs",value:function(){var e=this;this.apiManager.fetchBuildLogs(this.props.appName).then((function(t){e.state.isAppBuilding&&!t.isAppBuilding&&e.props.onAppBuildFinished(),e.setState({isAppBuilding:t.isAppBuilding}),t.isAppBuilding&&e.setState({expandedLogs:!0});var a=t.logs.lines,n=t.logs.firstLineNumber,i=0;n>e.state.lastLineNumberPrinted?n<0?i=-n:e.setState({buildLogs:"".concat(e.state.buildLogs,"[[ TRUNCATED ]]\n")}):i=e.state.lastLineNumberPrinted-n,e.setState({lastLineNumberPrinted:n+a.length});for(var s=!1,r=e.state.buildLogs,o=G.getAnsiColorRegex(),c=i;c<a.length;c++){r+=(a[c]||"").trim().replace(o,"")+"\n",s=!0}e.setState({buildLogs:r}),s&&setTimeout((function(){var e=document.getElementById("buildlog-text-id");e&&(e.scrollTop=e.scrollHeight)}),100)})).catch(q.createCatcher())}},{key:"componentDidMount",value:function(){var e=this;this.fetchBuildLogs(),this.fetchBuildLogsInterval=setInterval((function(){e.fetchBuildLogs()}),2e3)}},{key:"onExpandLogClicked",value:function(){this.setState({expandedLogs:!this.state.expandedLogs})}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[Object(J.jsx)(k.a,{children:Object(J.jsx)("div",{style:{width:"100%"},className:this.state.isAppBuilding?"":"hide-on-demand",children:Object(J.jsx)(xe.a,{message:Object(J.jsxs)("span",{children:["\xa0\xa0",Object(J.jsx)(Re.a,{indicator:Object(J.jsx)(Ae.a,{style:{fontSize:24},spin:!0}),size:"default"}),"\xa0\xa0\xa0\xa0\xa0\xa0 Building the image. This might take a few minutes..."]}),type:"info"})})}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{children:Object(J.jsx)(Ne,{onLinkClicked:function(){e.onExpandLogClicked()},children:Object(J.jsxs)("h4",{className:"unselectable-span",children:[this.state.expandedLogs?Object(J.jsx)(ze.a,{}):Object(J.jsx)(We.a,{}),"\xa0\xa0",this.state.expandedLogs?"Hide":"View"," ","Build Logs"]})})}),Object(J.jsx)("div",{className:this.state.isAppBuilding||this.state.expandedLogs?"":"hide-on-demand",style:{padding:5},children:Object(J.jsx)("textarea",{id:"buildlog-text-id",className:"logs-output",style:{whiteSpace:"pre"},readOnly:!0,value:e.state.buildLogs})})]})]})}}]),a}(Y),at=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isShowing:!e.defaultValue},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsx)(n.Fragment,{children:e.state.isShowing?e.createInput():e.createButton()})}},{key:"createButton",value:function(){var e=this;return Object(J.jsx)(D.a,{style:{width:"100%"},onClick:function(){e.setState({isShowing:!0})},children:"Show Password"})}},{key:"createInput",value:function(){var e=this;return Object(J.jsx)(y.a,{type:"text",spellCheck:!1,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",placeholder:e.props.placeholder,addonBefore:e.props.addonBefore,defaultValue:e.props.defaultValue,onChange:function(t){return e.props.onChange(t)}})}}]),a}(n.Component),nt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsx)("div",{children:Object(J.jsx)("form",{action:"/",autoComplete:"off",children:Object(J.jsxs)(k.a,{gutter:20,children:[Object(J.jsx)(de.a,{xs:{span:24},lg:{span:12},children:Object(J.jsx)(y.a,{style:{marginBottom:20},value:this.props.gitRepoValues.repo,addonBefore:"Repository",placeholder:"github.com/someone/something",type:"url",spellCheck:!1,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",onChange:function(t){var a=G.copyObject(e.props.gitRepoValues);a.repo=t.target.value,e.props.updateRepoInfo(a)}})}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:12},children:Object(J.jsx)(y.a,{style:{marginBottom:20},value:this.props.gitRepoValues.branch,addonBefore:Object(J.jsx)("span",{children:"Branch\xa0\xa0\xa0\xa0"}),placeholder:"master",type:"text",spellCheck:!1,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",onChange:function(t){var a=G.copyObject(e.props.gitRepoValues);a.branch=t.target.value,e.props.updateRepoInfo(a)}})}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:12},className:this.props.gitRepoValues.sshKey?"hide-on-demand":"",children:Object(J.jsx)(y.a,{style:{marginBottom:20},value:this.props.gitRepoValues.user,addonBefore:Object(J.jsx)("span",{children:"Username\xa0"}),placeholder:"myemail@gmail.com",type:"email",onChange:function(t){var a=G.copyObject(e.props.gitRepoValues);a.user=t.target.value,e.props.updateRepoInfo(a)}})}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:12},className:this.props.gitRepoValues.sshKey?"hide-on-demand":"",children:Object(J.jsx)(at,{defaultValue:this.props.gitRepoValues.password,addonBefore:"Password",placeholder:"githubpassword",onChange:function(t){var a=G.copyObject(e.props.gitRepoValues);a.password=t.target.value,e.props.updateRepoInfo(a)}})}),Object(J.jsxs)(de.a,{span:24,children:[Object(J.jsx)("span",{children:"Or, instead of username/password, use SSH Key:"}),Object(J.jsx)(y.a.TextArea,{style:{marginBottom:20},rows:4,value:this.props.gitRepoValues.sshKey,placeholder:"-----BEGIN RSA PRIVATE KEY-----\nAABBBCCC",onChange:function(t){var a=G.copyObject(e.props.gitRepoValues);a.sshKey=t.target.value,a.sshKey&&(a.password="",a.user=""),e.props.updateRepoInfo(a)}})]})]})})})}}]),a}(n.Component),it=a(711),st=a(694),rt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).beforeUpload=function(e){return!1},n.handleChange=function(e){if(e.fileList.length>1)K.b.error("You can only upload one TAR file! Remove the currently selected file first.");else{if(0===e.fileList.length)return n.setState({fileToBeUploaded:void 0}),void K.b.info("File removed");var t=e.fileList[0];t.name.indexOf(".tar")<0?K.b.error("You can only upload a TAR file!"):n.setState({fileToBeUploaded:t})}},n.state={fileToBeUploaded:void 0},n}return Object(c.a)(a,[{key:"startUploadAndDeploy",value:function(){var e=this,t=e.state.fileToBeUploaded;e.setState({fileToBeUploaded:void 0}),K.b.info("Upload has started"),Promise.resolve().then((function(){return e.apiManager.uploadAppData(e.props.appName,t.originFileObj)})).then((function(){e.props.onUploadSucceeded()})).catch(q.createCatcher((function(){e.setState({fileToBeUploaded:t})})))}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:24},lg:{span:12},children:Object(J.jsxs)(st.a.Dragger,{name:"files",accept:"*/*",multiple:!1,fileList:this.state.fileToBeUploaded?[this.state.fileToBeUploaded]:void 0,listType:"text",onChange:this.handleChange,beforeUpload:this.beforeUpload,action:"//",children:[Object(J.jsx)("p",{className:"ant-upload-drag-icon",children:Object(J.jsx)(it.a,{})}),Object(J.jsx)("p",{className:"ant-upload-text",children:"Click or drag TAR file to this area to upload"}),Object(J.jsxs)("p",{className:"ant-upload-hint",children:["Must contain ",Object(J.jsx)("code",{children:"captain-definition"})," ","file."]})]})})}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(D.a,{style:{marginTop:40},disabled:!this.state.fileToBeUploaded,onClick:function(){return e.startUploadAndDeploy()},type:"primary",size:"large",children:"Upload & Deploy"})})]})}}]),a}(Y),ot=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={userEnteredValue:"",uploadInProcess:!1},n}return Object(c.a)(a,[{key:"isSingleLine",value:function(){return!1}},{key:"startDeploy",value:function(e){var t=this;Promise.resolve().then((function(){return t.setState({uploadInProcess:!0}),t.apiManager.uploadCaptainDefinitionContent(t.props.appName,JSON.parse(e),"",!0)})).then((function(){t.setState({userEnteredValue:""}),t.props.onUploadSucceeded()})).catch(q.createCatcher()).then((function(){t.setState({uploadInProcess:!1})}))}},{key:"createTextArea",value:function(){var e=this;return e.isSingleLine()?Object(J.jsx)(y.a,{className:"code-input",placeholder:e.getPlaceHolderValue(),value:e.state.userEnteredValue,onChange:function(t){e.setState({userEnteredValue:t.target.value})}}):Object(J.jsx)(y.a.TextArea,{className:"code-input",placeholder:e.getPlaceHolderValue(),rows:7,value:e.state.userEnteredValue,onChange:function(t){e.setState({userEnteredValue:t.target.value})}})}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{style:{padding:16},children:[Object(J.jsx)(k.a,{children:e.createTextArea()}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{disabled:e.state.uploadInProcess||!e.state.userEnteredValue.trim(),type:"primary",onClick:function(){return e.startDeploy(e.convertDataToCaptainDefinition(e.state.userEnteredValue))},children:"Deploy Now"})})]})}}]),a}(Y),ct=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getPlaceHolderValue",value:function(){return'{\n    "schemaVersion" :2 ,\n    "imageName" : "mysql:5.7\n}'}},{key:"convertDataToCaptainDefinition",value:function(e){return e.trim()}}]),a}(ot),lt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getPlaceHolderValue",value:function(){return"# Derived from official mysql image (our base image)\nFROM mysql:5.7\n# Add a database\nENV MYSQL_DATABASE company"}},{key:"convertDataToCaptainDefinition",value:function(e){var t={schemaVersion:2,dockerfileLines:e.trim().split("\n")};return JSON.stringify(t)}}]),a}(ot),dt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getPlaceHolderValue",value:function(){return"nginxdemos/hello:latest"}},{key:"isSingleLine",value:function(){return!0}},{key:"convertDataToCaptainDefinition",value:function(e){var t={schemaVersion:2,imageName:e.trim()};return JSON.stringify(t)}}]),a}(ot),pt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).initRepoInfo=void 0,n.state={dummyVar:void 0,forceEditableCaptainDefinitionPath:!1,updatedVersions:void 0,buildLogRecreationId:""};var i=e.apiData.appDefinition.appPushWebhook;return n.initRepoInfo=i?Object(T.a)({},i.repoInfo):{user:"",password:"",branch:"",sshKey:"",repo:""},n}return Object(c.a)(a,[{key:"onUploadSuccess",value:function(){K.b.info("Build has started"),this.setState({buildLogRecreationId:"".concat((new Date).getTime())}),Fe()}},{key:"onAppBuildFinished",value:function(){var e=this;e.apiManager.getAllApps().then((function(t){for(var a=t.appDefinitions,n=0;n<a.length;n++){var i=a[n];if(i.appName===e.props.apiData.appDefinition.appName)return G.copyObject(i)}throw new Error("App not found!")})).then((function(t){e.setState({updatedVersions:{deployedVersion:t.deployedVersion,versions:t.versions}})})).catch(q.createCatcher())}},{key:"onVersionRollbackRequested",value:function(e){var t=this;t.apiManager.uploadCaptainDefinitionContent(t.props.apiData.appDefinition.appName,{schemaVersion:2,dockerfileLines:["FROM ".concat(e.deployedImageName)]},e.gitHash||"",!0).then((function(){t.onUploadSuccess()})).catch(q.createCatcher())}},{key:"render",value:function(){var e,t,a,n,i=this,s=this,r=this.props.apiData.appDefinition,o=r.appPushWebhook&&r.appPushWebhook.pushWebhookToken,c=r.appPushWebhook?r.appPushWebhook.repoInfo:{user:"",password:"",branch:"",sshKey:"",repo:""},l=o?"/user/apps/webhooks/triggerbuild?namespace=captain&token=".concat(r.appPushWebhook.pushWebhookToken):"",d="".concat(window.location.protocol,"//").concat(this.props.apiData.captainSubDomain,".").concat(this.props.apiData.rootDomain,"/api/v2").concat(l);return Object(J.jsxs)("div",{children:[Object(J.jsx)(tt,{onAppBuildFinished:function(){return s.onAppBuildFinished()},appName:r.appName,buildLogRecreationId:s.state.buildLogRecreationId},"".concat(r.appName,"-").concat(s.state.buildLogRecreationId)),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(et,{isMobile:this.props.isMobile,onVersionRollbackRequested:function(e){return s.onVersionRollbackRequested(e)},versions:s.state.updatedVersions?s.state.updatedVersions.versions:r.versions,deployedVersion:s.state.updatedVersions?s.state.updatedVersions.deployedVersion:r.deployedVersion}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(qe,{appName:r.appName},r.appName+"-LogsView"),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{style:{height:40}}),Object(J.jsxs)("h4",{children:[Object(J.jsx)(Be.a,{})," Method 1: Official CLI"]}),Object(J.jsxs)("p",{children:["Use CLI deploy command. This is the easiest method as it only requires a simply command like"," ",Object(J.jsx)("code",{children:"caprover deploy"}),". Read more about it in"," ",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/get-started.html#step-4-deploy-the-test-app",children:"the docs"}),". If you're using CI/CD to run ",Object(J.jsx)("code",{children:"caprover deploy"})," ","and you do not wish to use your password, you can use"," ",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/ci-cd-integration.html#app-tokens",children:"app-specific tokens"}),"."]}),Object(J.jsxs)(k.a,{justify:"start",style:{marginTop:this.props.isMobile?15:0},children:[Object(J.jsx)(de.a,{flex:"0",children:Object(J.jsx)(D.a,{style:{margin:5},block:this.props.isMobile,onClick:function(){var e=G.copyObject(i.props.apiData),t=e.appDefinition.appDeployTokenConfig;t||(t={enabled:!1}),t.enabled=!t.enabled,e.appDefinition.appDeployTokenConfig=t,s.props.updateApiData(e),setTimeout(s.props.onUpdateConfigAndSave,100)},children:(null===(e=r.appDeployTokenConfig)||void 0===e?void 0:e.enabled)?"Disable App Token":"Enable App Token"})})," ",Object(J.jsx)(de.a,{flex:"auto",children:Object(J.jsx)(y.a,{onFocus:function(e){var t;(null===(t=r.appDeployTokenConfig)||void 0===t?void 0:t.appDeployToken)&&(e.target.select(),document.execCommand("copy"),K.b.info("Copied to clipboard!"))},style:{margin:5},className:"code-input",readOnly:!0,disabled:!(null===(t=r.appDeployTokenConfig)||void 0===t?void 0:t.appDeployToken),value:(null===(a=r.appDeployTokenConfig)||void 0===a?void 0:a.enabled)?null===(n=r.appDeployTokenConfig)||void 0===n?void 0:n.appDeployToken:"** Enable App Token to generate a random app token **"})})]}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("h4",{children:[Object(J.jsx)(Be.a,{})," Method 2: Tarball"]}),Object(J.jsxs)("p",{children:["You can simply create a tarball (",Object(J.jsx)("code",{children:".tar"}),") of your project and upload it here via upload button."]}),Object(J.jsx)(rt,{onUploadSucceeded:function(){return s.onUploadSuccess()},appName:r.appName}),Object(J.jsx)("div",{style:{height:40}}),Object(J.jsxs)("h4",{children:[Object(J.jsx)(Be.a,{})," Method 3: Deploy from Github/Bitbucket/Gitlab"]}),Object(J.jsxs)("p",{children:["Enter your repository information in the form and save. Then copy the URL in the box as a webhook on Github, Bitbucket, Gitlab and etc. Once you push a commit, CapRover starts a new build.",Object(J.jsx)("br",{})]}),Object(J.jsx)(k.a,{children:Object(J.jsx)(y.a,{onFocus:function(e){o&&(e.target.select(),document.execCommand("copy"),K.b.info("Copied to clipboard!"))},className:"code-input",readOnly:!0,disabled:!o,value:o?d:"** Add repo info and save for this webhook to appear **"})}),Object(J.jsx)("br",{}),Object(J.jsx)(nt,{gitRepoValues:c,updateRepoInfo:function(e){var t=G.copyObject(i.props.apiData);t.appDefinition.appPushWebhook?t.appDefinition.appPushWebhook.repoInfo=G.copyObject(e):t.appDefinition.appPushWebhook={repoInfo:G.copyObject(e)},i.props.updateApiData(t)}}),Object(J.jsxs)(k.a,{justify:"end",style:{marginTop:this.props.isMobile?15:0},children:[Object(J.jsx)(D.a,{disabled:!o,style:{marginRight:this.props.isMobile?0:10},block:this.props.isMobile,onClick:function(){s.apiManager.forceBuild(l).then((function(){s.onUploadSuccess()})).catch(q.createCatcher())},children:"Force Build"}),Object(J.jsx)(D.a,{disabled:_e()(c,s.initRepoInfo),type:"primary",style:{marginTop:this.props.isMobile?15:0},block:this.props.isMobile,onClick:function(){return s.props.onUpdateConfigAndSave()},children:"Save & Update"})]}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("h4",{children:[Object(J.jsx)(Be.a,{})," Method 4: Deploy plain Dockerfile"]}),Object(J.jsx)(lt,{appName:r.appName,onUploadSucceeded:function(){return s.onUploadSuccess()}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("h4",{children:[Object(J.jsx)(Be.a,{})," Method 5: Deploy captain-definition file"]}),Object(J.jsx)(ct,{appName:r.appName,onUploadSucceeded:function(){return s.onUploadSuccess()}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("h4",{children:[Object(J.jsx)(Be.a,{})," Method 6: Deploy via ImageName"]}),Object(J.jsx)(dt,{appName:r.appName,onUploadSucceeded:function(){return s.onUploadSuccess()}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)(k.a,{children:[Object(J.jsxs)(de.a,{xs:{span:24},lg:{span:6},style:{minWidth:this.props.isMobile?"100%":400},children:[this.props.isMobile&&"captain-definition Relative Path",Object(J.jsx)(y.a,{addonBefore:!this.props.isMobile&&"captain-definition Relative Path",type:"text",defaultValue:r.captainDefinitionRelativeFilePath+"",disabled:!this.state.forceEditableCaptainDefinitionPath,onChange:function(e){var t=G.copyObject(i.props.apiData);t.appDefinition.captainDefinitionRelativeFilePath=e.target.value,i.props.updateApiData(t)}})]}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:12},children:Object(J.jsxs)("div",{style:{paddingLeft:this.props.isMobile?0:24,marginTop:this.props.isMobile?8:0},children:[Object(J.jsx)(ke.a,{title:"You shouldn't need to change this path unless you have a repository with multiple captain-definition files (mono repos). Read docs for captain definition before editing this",children:Object(J.jsx)(D.a,{type:"default",block:this.props.isMobile,disabled:this.state.forceEditableCaptainDefinitionPath,onClick:function(){return i.setState({forceEditableCaptainDefinitionPath:!0})},children:"Edit"})}),Object(J.jsx)(D.a,{style:{marginLeft:this.props.isMobile?0:20,marginTop:this.props.isMobile?8:0},block:this.props.isMobile,disabled:!this.state.forceEditableCaptainDefinitionPath,type:"primary",onClick:function(){return s.props.onUpdateConfigAndSave()},children:"Save & Update"})]})}),Object(J.jsx)(de.a,{span:6})]})]})}}]),a}(Y),ut=y.a.Search,ht=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={newDomain:"",dialogHttpUser:"",dialogHttpPass:""},n}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)("div",{children:this.createHttpSettingsContent()})}},{key:"reFetchData",value:function(){this.props.reFetchData()}},{key:"enableDefaultHttps",value:function(){var e=this;return this.props.setLoading(!0),Promise.resolve().then((function(){return e.props.apiManager.enableSslForBaseDomain(e.props.apiData.appDefinition.appName)})).then((function(){K.b.success("HTTPS is now enabled for your app")})).then((function(){e.reFetchData()})).catch(q.createCatcher((function(){e.props.setLoading(!1)})))}},{key:"onConnectNewDomainClicked",value:function(e){var t=this;return this.props.setLoading(!0),Promise.resolve().then((function(){return t.props.apiManager.attachNewCustomDomainToApp(t.props.apiData.appDefinition.appName,e)})).then((function(){K.b.success("New domain is now successfully connected!")})).then((function(){t.reFetchData()})).catch(q.createCatcher((function(){t.props.setLoading(!1)})))}},{key:"onEnableCustomDomainSslClicked",value:function(e){var t=this;return this.props.setLoading(!0),Promise.resolve().then((function(){return t.props.apiManager.enableSslForCustomDomain(t.props.apiData.appDefinition.appName,e)})).then((function(){K.b.success("HTTPS is successfully activated for your domain!")})).then((function(){t.reFetchData()})).catch(q.createCatcher((function(){t.props.setLoading(!1)})))}},{key:"onRemoveCustomDomainClicked",value:function(e){var t=this;return this.props.setLoading(!0),Promise.resolve().then((function(){return t.props.apiManager.removeCustomDomain(t.props.apiData.appDefinition.appName,e)})).then((function(){K.b.success("Your custom domain is successfully removed!")})).then((function(){t.reFetchData()})).catch(q.createCatcher((function(){t.props.setLoading(!1)})))}},{key:"createCustomDomainRows",value:function(){var e=this,t=this.props.apiData.appDefinition.customDomain||[],a=[];return t.forEach((function(t){var n=Object(J.jsxs)(k.a,{style:{marginTop:15},children:[Object(J.jsxs)(D.a.Group,{size:"small",children:[Object(J.jsx)(ke.a,{title:t.hasSsl?"Already activated":"Click to activate HTTPS for this domain",children:Object(J.jsx)(D.a,{disabled:t.hasSsl,onClick:function(){e.onEnableCustomDomainSslClicked(t.publicDomain)},type:"primary",children:"Enable HTTPS"})}),Object(J.jsx)(D.a,{style:{marginRight:20},onClick:function(){e.onRemoveCustomDomainClicked(t.publicDomain)},children:"Remove"})]}),Object(J.jsx)(Ee,{url:"http://".concat(t.publicDomain),children:t.publicDomain})]},t.publicDomain);a.push(n)})),a}},{key:"onEditDefaultNginxConfigClicked",value:function(){var e=G.copyObject(this.props.apiData);e.appDefinition.customNginxConfig=this.props.apiData.defaultNginxConfig,this.props.updateApiData(e)}},{key:"createCustomNginx",value:function(){var e=this,t=this.props.apiData.appDefinition.customNginxConfig;return t?Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Templates are built using EJS template pattern. Do not change the areas between ",Object(J.jsx)("code",{children:"<%"})," and"," ",Object(J.jsx)("code",{children:"%>"})," , unless you really know what you're doing! To revert to default, simply remove all the content."]}),Object(J.jsx)(y.a.TextArea,{style:{fontFamily:"monospace"},onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.customNginxConfig=t.target.value,e.props.updateApiData(a)},rows:17,defaultValue:t})]}):Object(J.jsx)("div",{children:Object(J.jsx)(D.a,{type:"default",onClick:function(){return e.onEditDefaultNginxConfigClicked()},children:"Edit Default Nginx Configurations"})})}},{key:"createHttpDetailsSettingsContent",value:function(){var e=this,t=this,a=this.props.apiData.appDefinition,i=this.props.apiData.rootDomain,s=t.props.apiData.appDefinition.httpAuth?t.props.apiData.appDefinition.httpAuth.user:"";return Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Your app is publicly available at:"}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(D.a.Group,{size:"small",children:Object(J.jsx)(ke.a,{title:a.hasDefaultSubDomainSsl?"Already activated":"Click to activate HTTPS for this domain",children:Object(J.jsx)(D.a,{disabled:a.hasDefaultSubDomainSsl,block:this.props.isMobile,onClick:function(){e.enableDefaultHttps()},type:"primary",children:"Enable HTTPS"})})}),Object(J.jsx)(Ee,{url:"http".concat(a.hasDefaultSubDomainSsl?"s":"","://").concat(a.appName,".").concat(i),children:Object(J.jsx)("span",{style:{marginLeft:20},children:"http".concat(a.hasDefaultSubDomainSsl?"s":"","://").concat(a.appName,".").concat(i)})})]}),this.createCustomDomainRows(),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(de.a,{xs:{span:24},lg:{span:15},children:this.props.isMobile?Object(J.jsxs)(n.Fragment,{children:[Object(J.jsx)(y.a,{placeholder:"www.the-best-app-in-the-world.com",onChange:function(t){return e.setState({newDomain:t.target.value})}}),Object(J.jsx)(D.a,{style:{marginTop:8},block:!0,onClick:function(){return e.onConnectNewDomainClicked(e.state.newDomain)},type:"primary",children:"Connect New Domain"})]}):Object(J.jsx)(ut,{placeholder:"www.the-best-app-in-the-world.com",enterButton:"Connect New Domain",onSearch:function(t){return e.onConnectNewDomainClicked(t)}})}),"\xa0\xa0\xa0",Object(J.jsx)(ke.a,{title:"Make sure the new domain points to this IP, otherwise verification will fail.",children:Object(J.jsx)("span",{children:Object(J.jsx)(Le.a,{style:{marginTop:9}})})})]}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),this.createCustomNginx(),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)(k.a,{children:Object(J.jsx)(de.a,{xs:{span:24},lg:{span:6},style:{minWidth:this.props.isMobile?"100%":300},children:Object(J.jsx)(ke.a,{title:"HTTP port inside the container. Default is 80. Change only if the app is running in a different port. This is used only for HTTP apps, not databases.",children:Object(J.jsx)(y.a,{addonBefore:"Container ".concat(this.props.isMobile?" ":"HTTP ","Port"),type:"number",defaultValue:a.containerHttpPort?a.containerHttpPort+"":"",onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.containerHttpPort=Number(t.target.value),e.props.updateApiData(a)}})})})}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(ye.a,{defaultChecked:!!this.props.apiData.appDefinition.forceSsl,onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.forceSsl=!!t.target.checked,e.props.updateApiData(a)},children:"Force HTTPS by redirecting all HTTP traffic to HTTPS"}),Object(J.jsx)(ke.a,{title:"Forcing HTTPS causes domains without HTTPS to malfunction. Make sure you enable HTTPS for the domain you want to use, before enabling Force HTTPS option.",children:Object(J.jsx)(Le.a,{})})]}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(ye.a,{defaultChecked:!!this.props.apiData.appDefinition.websocketSupport,onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.websocketSupport=!!t.target.checked,e.props.updateApiData(a)},children:"Websocket Support"}),Object(J.jsx)(ke.a,{title:"Adds the upgrade proxy headers to NGINX config.",children:Object(J.jsx)(Le.a,{})})]}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(D.a,{style:{marginRight:20},type:"default",onClick:function(){return t.onEditHttpAuthClicked()},children:"Edit HTTP Basic Auth"}),this.props.isMobile&&Object(J.jsx)("div",{style:{marginTop:10}}),Object(J.jsxs)("span",{children:["Current State:"," ",Object(J.jsx)("b",{children:s?"active":"inactive"})," ",s?"[user: ".concat(s," @ password: <HIDDEN>]"):""]})]})]})}},{key:"onEditHttpAuthClicked",value:function(){var e=this,t="IGNORE",a=e.props.apiData.appDefinition.httpAuth;e.setState({dialogHttpPass:a&&a.password||"",dialogHttpUser:a&&a.user||""}),Promise.resolve().then((function(){return new Promise((function(a,n){ve.a.confirm({title:"Edit HTTP Basic Auth",content:Object(J.jsxs)("div",{style:{paddingTop:30},children:[Object(J.jsx)("p",{children:"HTTP Basic authentication is the simplest technique for enforcing access controls to web resources."}),Object(J.jsx)("p",{children:"You can use this technique to restrict access to HTTP apps, specially those you create via One-Click app generator such as phpMyAdmin and etc."}),Object(J.jsx)("p",{children:Object(J.jsx)(y.a,{placeholder:"username",type:"text",defaultValue:e.state.dialogHttpUser,onChange:function(t){return e.setState({dialogHttpUser:(t.target.value||"").trim()})}})}),Object(J.jsx)("p",{children:Object(J.jsx)(y.a,{placeholder:"password",type:"text",defaultValue:e.state.dialogHttpPass,onChange:function(t){return e.setState({dialogHttpPass:(t.target.value||"").trim()})}})})]}),onOk:function(){a("CONFIRM")},onCancel:function(){a(t)}})}))})).then((function(a){if(a!==t){var n=G.copyObject(e.props.apiData),i=e.state.dialogHttpUser,s=e.state.dialogHttpPass;return i&&s?(n.appDefinition.httpAuth=n.appDefinition.httpAuth||{user:""},n.appDefinition.httpAuth.user=i,n.appDefinition.httpAuth.password=s):n.appDefinition.httpAuth=void 0,e.props.updateApiData(n),G.getDelayedPromise(300).then((function(){e.props.onUpdateConfigAndSave()}))}}))}},{key:"createHttpSettingsContent",value:function(){var e=this,t=this.props.apiData.appDefinition;return Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Your app is internally available as"," ",Object(J.jsxs)("code",{children:["srv-captain--",t.appName]})," to other Captain apps. In case of web-app, it is accessible via"," ",Object(J.jsx)("code",{children:"http://srv-captain--".concat(t.appName)})," from other apps."]}),Object(J.jsx)("br",{}),Object(J.jsx)(ye.a,{defaultChecked:this.props.apiData.appDefinition.notExposeAsWebApp,onChange:function(t){var a=G.copyObject(e.props.apiData);a.appDefinition.notExposeAsWebApp=!!t.target.checked,e.props.updateApiData(a)},children:"Do not expose as web-app"}),Object(J.jsx)(ke.a,{title:"Use this if you don't want your app be externally available.",children:Object(J.jsx)(Le.a,{})}),Object(J.jsx)("div",{style:{height:35}}),t.notExposeAsWebApp?Object(J.jsx)("div",{}):this.createHttpDetailsSettingsContent()]})}}]),a}(n.Component),jt=Oe.a.TabPane,bt="WEB_SETTINGS",mt="DEPLOYMENT",ft=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).reRenderTriggered=!1,n.confirmedAppNameToDelete="",n.volumesToDelete={},n.state={activeTabKey:bt,isLoading:!0,renderCounterForAffixBug:0,apiData:void 0},n}return Object(c.a)(a,[{key:"goBackToApps",value:function(){this.props.history.push("/apps")}},{key:"openRenameAppDialog",value:function(){var e=this,t=e.state.apiData.appDefinition,a={newName:t.appName};ve.a.confirm({title:"Rename the app:",content:Object(J.jsxs)("div",{children:[Object(J.jsx)(xe.a,{type:"warning",message:"If other apps use the current name to communicate with this app, make sure to update them as well to avoid problems."}),Object(J.jsx)(y.a,{style:{marginTop:15},placeholder:"app-name-here",defaultValue:t.appName,onChange:function(e){a.newName=(e.target.value||"").trim()}})]}),onOk:function(){t.appName!==a.newName&&a.newName&&e.renameAppTo(a.newName)}})}},{key:"viewDescription",value:function(){var e=this,t=e.state.apiData.appDefinition,a={tempDescription:t.description};ve.a.confirm({title:"App Description:",content:Object(J.jsx)("div",{children:Object(J.jsx)(y.a.TextArea,{style:{marginTop:15},placeholder:"Use app description to take some notes for your app",rows:12,defaultValue:t.description,onChange:function(e){a.tempDescription=e.target.value}})}),onOk:function(){var n=t.description!==a.tempDescription;t.description=a.tempDescription,n&&e.onUpdateConfigAndSave()}})}},{key:"onDeleteAppClicked",value:function(){var e=this,t=G.copyObject(e.state.apiData.appDefinition);e.confirmedAppNameToDelete="";var a=[];e.volumesToDelete={},t.volumes&&t.volumes.forEach((function(t){t.volumeName&&(a.push(t.volumeName),e.volumesToDelete[t.volumeName]=!0)})),ve.a.confirm({title:"Confirm Permanent Delete?",content:Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["You are about to delete ",Object(J.jsx)("code",{children:t.appName}),". Enter the name of this app in the box below to confirm deletion of this app. Please note that this is",Object(J.jsx)("b",{children:" not reversible"}),"."]}),Object(J.jsxs)("p",{className:a.length?"":"hide-on-demand",children:["Please select the volumes you want to delete. Note that if any of the volumes are being used by other CapRover apps, they will not be deleted even if you select them."," ",Object(J.jsx)("b",{children:"Note: "}),"deleting volumes takes more than 10 seconds, please be patient"]}),a.map((function(t){return Object(J.jsx)("div",{children:Object(J.jsx)(ye.a,{defaultChecked:!!e.volumesToDelete[t],onChange:function(a){e.volumesToDelete[t]=!e.volumesToDelete[t]},children:t})},t)})),Object(J.jsx)("br",{}),Object(J.jsx)("br",{}),Object(J.jsx)("p",{children:"Confirm App Name:"}),Object(J.jsx)(y.a,{type:"text",placeholder:t.appName,onChange:function(t){e.confirmedAppNameToDelete=t.target.value.trim()}})]}),onOk:function(){if(e.confirmedAppNameToDelete===t.appName){var a=[];Object.keys(e.volumesToDelete).forEach((function(t){e.volumesToDelete[t]&&a.push(t)})),e.setState({isLoading:!0}),e.apiManager.deleteApp(t.appName,a).then((function(e){var t=e.volumesFailedToDelete;t&&t.length&&ve.a.info({title:"Some volumes weren't deleted!",content:Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Some volumes weren't deleted because they were probably being used by other containers. Sometimes, this is because of a temporary delay when the original container deletion was done with a delay. Please consult the"," ",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/persistent-apps.html#removing-persistent-apps",children:"documentation"})," ","and delete them manually if needed. Skipped volumes are:"]}),Object(J.jsx)("ul",{children:t.map((function(e){return Object(J.jsx)("li",{children:Object(J.jsx)("code",{children:e})})}))})]})}),K.b.success("App deleted!")})).then((function(){e.goBackToApps()})).catch(q.createCatcher((function(){e.setState({isLoading:!1})})))}else K.b.warning("App name did not match. Operation cancelled.")},onCancel:function(){}})}},{key:"renameAppTo",value:function(e){var t=this,a=G.copyObject(t.state.apiData.appDefinition);t.setState({isLoading:!0}),this.apiManager.renameApp(a.appName,e).then((function(){return t.reFetchData()})).catch(q.createCatcher()).then((function(){t.setState({isLoading:!1})}))}},{key:"onUpdateConfigAndSave",value:function(){var e=this,t=G.copyObject(e.state.apiData.appDefinition);e.setState({isLoading:!0}),this.apiManager.updateConfigAndSave(t.appName,t).then((function(){return e.reFetchData()})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this;if(!t.state.apiData&&t.state.isLoading)return Object(J.jsx)(Pe,{});if(t.reRenderTriggered||(t.reRenderTriggered=!0,setTimeout((function(){t.setState({renderCounterForAffixBug:1})}),50)),!t.state.apiData)return Object(J.jsx)(Ie,{});var a=t.state.apiData.appDefinition;return Object(J.jsx)(k.a,{children:Object(J.jsx)(de.a,{span:20,offset:2,children:Object(J.jsxs)(x.a,{extra:Object(J.jsx)(Ne,{onLinkClicked:function(){return t.goBackToApps()},children:Object(J.jsx)(ke.a,{title:"Close",children:Object(J.jsx)(je.a,{})})}),title:Object(J.jsxs)("span",{children:[Object(J.jsx)(Ne,{onLinkClicked:function(){return t.openRenameAppDialog()},children:Object(J.jsx)(ke.a,{title:"Rename app",placement:"bottom",children:Object(J.jsx)(be.a,{})})}),"\xa0\xa0",a.appName,"\xa0\xa0\xa0\xa0\xa0\xa0",Object(J.jsx)(Ne,{onLinkClicked:function(){return t.viewDescription()},children:Object(J.jsx)(De.a,{placement:"bottom",content:Object(J.jsx)("div",{style:{maxWidth:300,whiteSpace:"pre-line"},children:a.description||"Click to edit app description..."}),title:"App description",children:Object(J.jsx)(me.a,{})})})]}),children:[this.state.isLoading&&Object(J.jsx)("div",{style:{position:"absolute",left:"50%"},children:Object(J.jsx)(Pe,{})}),Object(J.jsxs)(Oe.a,{defaultActiveKey:bt,onChange:function(e){t.setState({activeTabKey:e})},className:Te()({disabled:this.state.isLoading}),children:[Object(J.jsx)(jt,{tab:Object(J.jsx)("span",{className:"unselectable-span",children:"HTTP Settings"}),children:Object(J.jsx)(ht,{isMobile:this.props.isMobile,setLoading:function(t){return e.setState({isLoading:t})},reFetchData:function(){return e.reFetchData()},apiData:this.state.apiData,apiManager:this.apiManager,updateApiData:function(t){return e.setState({apiData:t})},onUpdateConfigAndSave:function(){return t.onUpdateConfigAndSave()}})},bt),Object(J.jsx)(jt,{tab:Object(J.jsx)("span",{className:"unselectable-span",children:"App Configs"}),children:Object(J.jsx)(Ue,{isMobile:this.props.isMobile,setLoading:function(t){return e.setState({isLoading:t})},reFetchData:function(){return e.reFetchData()},apiData:this.state.apiData,apiManager:this.apiManager,updateApiData:function(t){return e.setState({apiData:t})},onUpdateConfigAndSave:function(){return t.onUpdateConfigAndSave()}})},"APP_CONFIGS"),Object(J.jsx)(jt,{tab:Object(J.jsx)("span",{className:"unselectable-span",children:"Deployment"}),children:Object(J.jsx)(pt,{isMobile:this.props.isMobile,setLoading:function(t){return e.setState({isLoading:t})},reFetchData:function(){return e.reFetchData()},apiData:this.state.apiData,apiManager:this.apiManager,onUpdateConfigAndSave:function(){return t.onUpdateConfigAndSave()},updateApiData:function(t){e.setState({apiData:t})}})},mt)]}),Object(J.jsx)("div",{style:{height:70}}),Object(J.jsx)(Ce.a,{offsetBottom:10,target:function(){var e=t.props.mainContainer;return e&&e.current?e.current:window},children:Object(J.jsx)("div",{className:Te()({"hide-on-demand":t.state.activeTabKey===mt,disabled:this.state.isLoading}),style:{borderRadius:8,background:"rgba(51,73,90,0.9)",paddingTop:20,paddingBottom:20},children:Object(J.jsxs)(k.a,{justify:"center",gutter:20,children:[Object(J.jsx)(de.a,{span:8,children:Object(J.jsx)("div",{style:{textAlign:"center"},children:Object(J.jsx)(D.a,{style:{minWidth:t.props.isMobile?35:135},danger:!0,size:"large",onClick:function(){return t.onDeleteAppClicked()},children:t.props.isMobile?Object(J.jsx)(fe.a,{}):"Delete App"})})}),Object(J.jsx)(de.a,{span:8,children:Object(J.jsx)("div",{style:{textAlign:"center"},children:Object(J.jsx)(D.a,{style:{minWidth:t.props.isMobile?35:135},type:"primary",size:"large",onClick:function(){return t.onUpdateConfigAndSave()},children:t.props.isMobile?Object(J.jsx)(ge.a,{}):"Save & Update"})})})]})})})]})})})}},{key:"componentDidMount",value:function(){this.reFetchData()}},{key:"reFetchData",value:function(){var e=this;return e.setState({isLoading:!0}),this.apiManager.getAllApps().then((function(t){for(var a=0;a<t.appDefinitions.length;a++){var n=t.appDefinitions[a];if(n.appName===e.props.match.params.appName)return void e.setState({isLoading:!1,apiData:{appDefinition:n,rootDomain:t.rootDomain,captainSubDomain:t.captainSubDomain,defaultNginxConfig:t.defaultNginxConfig}})}e.goBackToApps()})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}}]),a}(Y);var gt=Object(u.b)((function(e){return{isMobile:e.globalReducer.isMobile}}),void 0)(ft),Ot=a(147),vt=a(716),xt=a(717),yt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={searchTerm:""},n}return Object(c.a)(a,[{key:"appDetailPath",value:function(e){return"/apps/details/".concat(e)}},{key:"createColumns",value:function(){var e=this,t=this,a="center",n=[{title:"App Name",dataIndex:"appName",key:"appName",render:function(t){return Object(J.jsx)(h.b,{to:e.appDetailPath(t),children:t})},sorter:function(e,t){return e.appName?e.appName.localeCompare(t.appName||""):0},sortDirections:["descend","ascend"]},{title:"Persistent Data\t",dataIndex:"hasPersistentData",key:"hasPersistentData",align:a,render:function(e){return e?Object(J.jsx)("span",{children:Object(J.jsx)(Ot.a,{})}):Object(J.jsx)("span",{})}},{title:"Instance Count",dataIndex:"instanceCount",key:"instanceCount",align:a},{title:"Last Deployed",dataIndex:"lastDeployTime",key:"lastDeployTime",align:a,sorter:function(e,t){return Date.parse(e.lastDeployTime)-Date.parse(t.lastDeployTime)},sortDirections:["descend","ascend"],render:function(e,t){return e?Object(J.jsxs)("span",{children:[Object(J.jsx)(Ze,{timestamp:e}),t.isAppBuilding?Object(J.jsx)(Ae.a,{style:{fontSize:"12px",marginLeft:12}}):void 0]}):Object(J.jsx)("span",{})}},{title:"Open",dataIndex:"notExposeAsWebApp",key:"openInBrowser",align:a,render:function(e,a){return e?Object(J.jsx)(ke.a,{title:"Not exposed as a web app",children:Object(J.jsx)(vt.a,{})}):Object(J.jsxs)(Ee,{url:"http".concat(a.hasDefaultSubDomainSsl?"s":"","://").concat(a.appName,".").concat(t.props.rootDomain),children:[Object(J.jsx)(xt.a,{})," "]})}}],i=window.localStorage.appsSortKey||"appName",s=window.localStorage.appsSortOrder||"ascend";return(n.find((function(e){return e.key===i}))||n[0]).defaultSortOrder=s,n}},{key:"render",value:function(){var e=this,t=this,a=t.props.apps.filter((function(e){return!t.state.searchTerm||e.appName.indexOf(t.state.searchTerm)>=0})).map((function(e){var t=e.versions.filter((function(t){return t.version===e.deployedVersion})),a="";return 0===t.length?w.error("App ".concat(e.appName," has invalid deployVersion=").concat(e.deployedVersion,", versions:").concat(JSON.stringify(e.versions))):a=t[0].timeStamp||"",Object(T.a)(Object(T.a)({},e),{},{lastDeployTime:a})})),n=Object(J.jsx)(y.a,{placeholder:"Busca por nombre",type:"text",onChange:function(e){return t.setState({searchTerm:(e.target.value||"").trim().toLowerCase()})}});return Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:Object(J.jsx)(x.a,{extra:!t.props.isMobile&&n,title:Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsxs)("span",{children:[Object(J.jsx)(ee.a,{}),"\xa0\xa0\xa0Tus apps"]}),Object(J.jsx)("br",{}),t.props.isMobile&&Object(J.jsx)("div",{style:{marginTop:8},children:n})]}),children:Object(J.jsx)(k.a,{justify:"center",children:t.props.isMobile?a.map((function(a){var n=a.appName,i=void 0===n?"":n,s=a.hasPersistentData,r=a.notExposeAsWebApp,o=a.instanceCount,c=a.hasDefaultSubDomainSsl;return Object(J.jsxs)(x.a,{type:"inner",title:i,extra:Object(J.jsx)(h.b,{to:e.appDetailPath(i),children:"Detalles"}),style:{width:"100%",marginBottom:8},children:[Object(J.jsxs)("p",{children:["Persistent Data:"," ",s?Object(J.jsx)("span",{children:Object(J.jsx)(Ot.a,{})}):void 0]}),Object(J.jsxs)("p",{children:["Exposed Webapp:"," ",r?void 0:Object(J.jsx)("span",{children:Object(J.jsx)(Ot.a,{})})]}),Object(J.jsxs)("p",{children:["N\xfamero de instancias: ",o]}),Object(J.jsxs)("p",{children:["Abrir en el navegador:"," ",r?void 0:Object(J.jsxs)(Ee,{url:"http".concat(c?"s":"","://").concat(i,".").concat(t.props.rootDomain),children:[Object(J.jsx)(xt.a,{})," "]})]})]},i)})):Object(J.jsx)("div",{style:{width:"100%"},children:Object(J.jsx)($e.a,{rowKey:"appName",columns:t.createColumns(),dataSource:a,pagination:!1,size:"middle",onChange:function(e,t,a){Array.isArray(a)||(window.localStorage.appsSortKey=a.columnKey,window.localStorage.appsSortOrder=a.order)}})})})})})})}}]),a}(n.Component);var kt=Object(u.b)((function(e){return{isMobile:e.globalReducer.isMobile}}),void 0)(yt),Dt=a(719),Ct=a(720),St=a(199),Tt=a.n(St),At=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={hasPersistency:!1,appName:""},n}return Object(c.a)(a,[{key:"onCreateNewAppClicked",value:function(){this.props.onCreateNewAppClicked(this.state.appName,this.state.hasPersistency)}},{key:"render",value:function(){var e=this;return Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:10},children:Object(J.jsxs)(x.a,{title:Object(J.jsxs)("span",{children:[Object(J.jsx)(Dt.a,{}),"\xa0\xa0\xa0Crear nueva aplicaci\xf3n"]}),children:[Object(J.jsx)(k.a,{children:e.props.isMobile?Object(J.jsxs)(n.Fragment,{children:[Object(J.jsx)(y.a,{placeholder:"nueva-app",onChange:function(t){return e.setState({appName:t.target.value})}}),Object(J.jsx)(D.a,{style:{marginTop:8},block:!0,onClick:function(){return e.onCreateNewAppClicked()},type:"primary",children:"Crear nueva App"})]}):Object(J.jsx)(Tt.a,{placeholder:"my-amazing-app",enterButton:"Create New App",onChange:function(t){return e.setState({appName:t.target.value})},onSearch:function(t){return e.onCreateNewAppClicked()}})}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{justify:e.props.isMobile?"start":"end",children:[Object(J.jsx)(ye.a,{onChange:function(t){return e.setState({hasPersistency:!!t.target.checked})},children:"Persistencia de datos"}),"\xa0\xa0",Object(J.jsx)(ke.a,{title:"Mostly used for databases, see docs for details.",children:Object(J.jsx)(Ee,{url:"https://caprover.com/docs/persistent-apps.html",children:Object(J.jsx)("span",{children:Object(J.jsx)(Ct.a,{})})})})]}),Object(J.jsx)("br",{}),Object(J.jsx)("hr",{}),Object(J.jsx)("br",{}),Object(J.jsxs)("div",{style:{textAlign:"center"},children:[Object(J.jsx)("p",{children:"O selecciona desde"}),Object(J.jsx)(h.b,{to:"/apps/oneclick/",className:"ant-btn",children:"One-Click Apps/Databases"})]})]})})})}}]),a}(n.Component);var Rt=Object(u.b)((function(e){return{isMobile:e.globalReducer.isMobile}}),void 0)(At),Pt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,apiData:void 0},n}return Object(c.a)(a,[{key:"onCreateNewAppClicked",value:function(e,t){var a=this;Promise.resolve().then((function(){return a.setState({isLoading:!0}),a.apiManager.registerNewApp(e,t,!0)})).then((function(){return a.reFetchData()})).catch(q.createCatcher()).then((function(){a.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this;if(e.state.isLoading)return Object(J.jsx)(Pe,{});var t=e.state.apiData;return t?Object(J.jsxs)("div",{children:[Object(J.jsx)(Rt,{onCreateNewAppClicked:function(t,a){e.onCreateNewAppClicked(t,a)}}),Object(J.jsx)("div",{style:{height:25}}),t.appDefinitions.length>0?Object(J.jsx)(kt,{history:this.props.history,defaultNginxConfig:t.defaultNginxConfig,apps:t.appDefinitions,rootDomain:t.rootDomain}):Object(J.jsx)("div",{})]}):Object(J.jsx)(Ie,{})}},{key:"componentDidMount",value:function(){this.reFetchData()}},{key:"reFetchData",value:function(){var e=this;return e.setState({isLoading:!0}),this.apiManager.getAllApps().then((function(t){e.setState({apiData:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}}]),a}(Y),Nt=a(200),wt=a.n(Nt);var It=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsxs)(n.Fragment,{children:[" ",Object(J.jsx)(y.a.TextArea,{className:"code-input",placeholder:e.props.placeholder,rows:10,defaultValue:e.props.defaultValue,onChange:function(t){e.props.onChange(function(e){if(!(e=(e||"").trim()).length)return"";if(e.startsWith("{")||e.startsWith("["))return e;try{return JSON.stringify(wt.a.parse(e))}catch(t){console.log(t)}return""}(t.target.value))}})]})}}]),a}(n.Component),Et=a(721),Lt=a(722),Mt=a(105),Ut=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"compareTwoStrings",value:function(e,t){if(e=e.replace(/\s+/g,""),t=t.replace(/\s+/g,""),!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e===t)return 1;if(1===e.length&&1===t.length)return 0;if(e.length<2||t.length<2)return 0;for(var a=new Map,n=0;n<e.length-1;n++){var i=e.substring(n,n+2),s=a.has(i)?a.get(i)+1:1;a.set(i,s)}for(var r=0,o=0;o<t.length-1;o++){var c=t.substring(o,o+2),l=a.has(c)?a.get(c):0;l>0&&(a.set(c,l-1),r++)}return 2*r/(e.length+t.length-2)}},{key:"findBestMatch",value:function(t,a){if(!e.areArgsValid(t,a))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");for(var n=[],i=0,s=0;s<a.length;s++){var r=a[s],o=e.compareTwoStrings(t,r);n.push({target:r,rating:o}),o>n[i].rating&&(i=s)}return{ratings:n,bestMatch:n[i],bestMatchIndex:i}}},{key:"areArgsValid",value:function(e,t){return"string"===typeof e&&(!!Array.isArray(t)&&(!!t.length&&!t.find((function(e){return"string"!==typeof e}))))}}]),e}(),Bt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={selectedApp:void 0,sortScores:{}},n}return Object(c.a)(a,[{key:"create3rdPartyTagIfNeeded",value:function(e){var t="https://oneclickapps.caprover.com"===e.baseUrl||!e.baseUrl,a=!!e.isOfficial;return Object(J.jsx)("div",{style:{marginTop:20},children:Object(J.jsxs)(k.a,{align:"middle",justify:"space-between",children:[t?void 0:Object(J.jsx)(ke.a,{title:"From: ".concat(e.baseUrl),children:Object(J.jsx)(Et.a,{})}),a?Object(J.jsx)(ke.a,{title:"Utiliza la imagen oficial proporcionada por el desarrollador de la aplicaci\xf3n o una fuente confiable como Bitnami o LinuxServer",children:Object(J.jsx)(Lt.a,{})}):void 0]})})}},{key:"createOneClickApp",value:function(e){var t=this,a=e.name&&e.baseUrl?"/apps/oneclick/".concat(e.name,"?baseDomain=").concat(encodeURIComponent(e.baseUrl)):"#";return Object(J.jsx)("div",{className:"one-click-app-card",children:Object(J.jsx)(h.b,{to:a,onClick:function(a){return t.props.onAppSelectionChanged(a,e.name)},children:Object(J.jsxs)(x.a,{cover:Object(J.jsx)("img",{src:e.logoUrl,alt:"App logo"}),hoverable:!0,children:[Object(J.jsx)(x.a.Meta,{title:e.displayName,description:e.description}),this.create3rdPartyTagIfNeeded(e)]})})},e.name+e.baseUrl)}},{key:"render",value:function(){var e=this,t=e.props.oneClickAppList;if(Object.keys(e.state.sortScores).length>0){var a=t.concat().sort((function(t,a){return(e.state.sortScores[a.name]||0)-(e.state.sortScores[t.name]||0)}));t=a.filter((function(t){return e.state.sortScores[t.name]>.5}))}return Object(J.jsxs)(n.Fragment,{children:[Object(J.jsx)("div",{style:{height:40}}),Object(J.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:Object(J.jsx)(y.a.Search,{style:{maxWidth:200,marginBottom:40},placeholder:"Busca una app...",onChange:function(t){var a=(t.currentTarget.value||"").trim().toLowerCase(),n={};a&&e.props.oneClickAppList.forEach((function(e){var t=0,i=((e.displayName||"").trim()||e.name).toLowerCase().trim();t=i.toLowerCase().includes(a)?1:e.description&&e.description.toLowerCase().includes(a)?.99:Ut.compareTwoStrings(a,i),n[e.name]=t||0})),e.setState({sortScores:n})}})}),Object(J.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:t.length?t.length&&t.map((function(t){return e.createOneClickApp(t)})):Object(J.jsxs)("div",{children:[Object(J.jsx)(Mt.a,{description:"Ning\xfana aplicacion encontrada"}),Object(J.jsxs)("div",{style:{paddingTop:30},children:["\xbfQu\xe9 pasa si la aplicaci\xf3n / base de datos que quiero no est\xe1 en la lista? aqu\xed? \xa0",Object(J.jsx)(Ee,{url:"https://caprover.com/docs/one-click-apps.html#what-about-other-apps",children:Object(J.jsx)(Le.a,{})})]})]})})]})}}]),a}(n.Component),Vt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={apiData:void 0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;e.apiManager.getAllOneClickAppRepos().then((function(t){e.setState({apiData:t})})).catch(q.createCatcher())}},{key:"onConnectNewRepositoryClicked",value:function(e){var t=this;t.apiManager.addNewCustomOneClickRepo(e).then((function(){t.setState({apiData:void 0}),t.fetchData()})).catch(q.createCatcher())}},{key:"onDeleteUrlClicked",value:function(e){var t=this;ve.a.confirm({title:"Remove One Click Repo",content:Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Are you sure you want to delete the one click repository from your list?"}),Object(J.jsx)("code",{children:e})]}),onOk:function(){t.apiManager.deleteCustomOneClickRepo(e).then((function(){t.fetchData()})).catch(q.createCatcher())},onCancel:function(){}})}},{key:"createUrlRow",value:function(e){var t=this;return Object(J.jsxs)("div",{style:{margin:10},children:[Object(J.jsx)(D.a,{style:{marginRight:10},onClick:function(){t.onDeleteUrlClicked(e)},size:"small",danger:!0,children:Object(J.jsx)("span",{children:Object(J.jsx)(fe.a,{})})}),e]},e)}},{key:"create3rdPartyRepoList",value:function(){var e=this;if(e.state.apiData&&e.state.apiData.urls){var t=G.copyObject(e.state.apiData.urls);return Object(J.jsx)("div",{children:t.map((function(t){return e.createUrlRow(t)}))})}}},{key:"render",value:function(){var e=this;return this.state.apiData?Object(J.jsxs)("div",{children:[Object(J.jsx)("h4",{children:"3rd party repositories:"}),Object(J.jsx)("div",{style:{maxWidth:600,marginBottom:30},children:Object(J.jsx)(Tt.a,{placeholder:"oneclick-apps.your-3rd-party-domain.com",enterButton:"Connect New Repository",onSearch:function(t){return e.onConnectNewRepositoryClicked(t)}})}),e.create3rdPartyRepoList()]}):Object(J.jsx)(Pe,{})}}]),a}(Y),_t="TEMPLATE_ONE_CLICK_APP",Ht="oneClickAppStringifiedData",Ft=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={oneClickAppList:void 0,isCustomTemplateSelected:!1,templateOneClickAppData:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;e.apiManager.getAllOneClickApps().then((function(t){var a=t.oneClickApps;a.push({name:_t,description:"Plantilla para crear apps con un click. Principalmente para dasarrollo",logoUrl:"/icon-512x512.png",baseUrl:"",displayName:">> Plantilla <<"}),e.setState({oneClickAppList:a})})).catch(q.createCatcher())}},{key:"createCustomTemplateInput",value:function(){var e=this,t=!0;if(this.state.templateOneClickAppData)try{JSON.parse(this.state.templateOneClickAppData)}catch(a){t=!1}return Object(J.jsxs)("div",{className:e.state.isCustomTemplateSelected?"":"hide-on-demand",children:[Object(J.jsx)("div",{children:Object(J.jsxs)("p",{children:["Esto es principalmente para la prueba. Puede copiar y pegar su plantilla de aplicaci\xf3n One-Click personalizada aqu\xed. Mira"," ",Object(J.jsx)(Ee,{url:"https://github.com/caprover/one-click-apps/tree/master/public/v4/apps",children:"el repositorio principal de Spacecloud"})," ","para muestras e ideas."]})}),Object(J.jsx)(It,{placeholder:'YAML or JSON # use captainVersion 4\n{\n  "captainVersion": "4",\n  "version": "3.3"\n  "services": {\n    "$$cap_appname": {\n          "image": "adminer:$$cap_adminer_version",\n          "containerHttpPort": "8080",\n          "environment": {\n              "ADMINER_DESIGN": "$$cap_adminer_design"\n          }\n    }\n  }\n}',onChange:function(t){e.setState({templateOneClickAppData:t})}}),Object(J.jsx)("div",{style:{height:10}}),t?Object(J.jsx)("div",{}):Object(J.jsx)(xe.a,{message:"Los datos que has introducidos no son validos para JSON.",type:"error"}),Object(J.jsx)("div",{style:{height:30}}),Object(J.jsx)(k.a,{justify:"space-between",align:"middle",children:Object(J.jsx)(D.a,{onClick:function(){return e.props.history.push("/apps/oneclick/".concat(_t)+("?".concat(Ht,"=")+encodeURIComponent(e.state.templateOneClickAppData)))},disabled:!e.state.templateOneClickAppData||!t,style:{minWidth:150},type:"primary",children:"Next"})})]})}},{key:"createOneClickAppListGrid",value:function(){var e=this;return this.state.oneClickAppList?Object(J.jsx)(Bt,{onAppSelectionChanged:function(t,a){a===_t&&(t.preventDefault(),e.setState({isCustomTemplateSelected:!0}))},oneClickAppList:e.state.oneClickAppList}):Object(J.jsx)(Pe,{})}},{key:"render",value:function(){var e=this;return Object(J.jsx)("div",{children:Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:23},children:Object(J.jsxs)(x.a,{title:"Apliacaciones de un click",children:[Object(J.jsxs)("div",{className:e.state.isCustomTemplateSelected?"hide-on-demand":"",children:[Object(J.jsx)("p",{children:"Elija una aplicaci\xf3n, una base de datos o un paquete (Aplicaci\xf3n + base de datos) de la lista a continuaci\xf3n. el resto es magia"}),Object(J.jsxs)("p",{children:["Las aplicaciones de un clic se recuperan del repositorio oficial"," ",Object(J.jsxs)(Ee,{url:"https://github.com/caprover/one-click-apps",children:["Spacecloud Apps un click"," "]}),"por defecto. Puede agregar otros repositorios p\xfablicos/privados si lo desea."]}),e.createOneClickAppListGrid(),Object(J.jsx)("div",{style:{height:50}}),Object(J.jsx)(Vt,{})]}),G.isSafari()?Object(J.jsx)(xe.a,{message:"Parece que est\xe1s usando Safari. La implementaci\xf3n de aplicaciones de un solo clic puede ser inestable en Safari. Se recomienda usar Chrome",type:"warning"}):Object(J.jsx)("div",{}),Object(J.jsx)("div",{style:{height:50}}),e.createCustomTemplateInput()]})})})})}}]),a}(Y),zt=a(138),Wt=a.n(zt),Kt=a(201),qt=a.n(Kt),Gt=a(208),Yt=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"convertComposeToService",value:function(t){var a=[];a.push(e.parseHostname(t));var n={};if(a.forEach((function(e){n=G.mergeObjects(n,e)})),0!==Object.keys(n).length)return Nt.stringify(n)}},{key:"parseHostname",value:function(e){var t={},a=e.hostname?"".concat(e.hostname).trim():"";return e.hostname&&(t.TaskTemplate={ContainerSpec:{Hostname:a}}),t}}]),e}(),Jt=function(){function e(){Object(o.a)(this,e),this.apiManager=new W}return Object(c.a)(e,[{key:"createRegisterPromise",value:function(e,t){var a=this;return Promise.resolve().then((function(){return a.apiManager.registerNewApp(e,!!t.volumes&&!!t.volumes.length,!1)}))}},{key:"createConfigurationPromise",value:function(e,t){var a=this;return Promise.resolve().then((function(){return a.apiManager.getAllApps().then((function(t){for(var a=t.appDefinitions,n=0;n<a.length;n++){var i=a[n];if(i.appName===e)return G.copyObject(i)}})).then((function(n){if(!n)throw new Error("App was not found right after registering!!");n.volumes=n.volumes||[];for(var i=t.volumes||[],s=0;s<i.length;s++){var r=i[s].split(":");r[0].startsWith("/")?n.volumes.push({hostPath:r[0],containerPath:r[1]}):n.volumes.push({volumeName:r[0],containerPath:r[1]})}n.ports=n.ports||[];for(var o=t.ports||[],c=0;c<o.length;c++){var l=o[c].split(":");n.ports.push({hostPort:Number(l[0]),containerPort:Number(l[1])})}n.envVars=n.envVars||[];var d=t.environment||{};Object.keys(d).forEach((function(e){n.envVars.push({key:e,value:d[e]})}));var p=Yt.convertComposeToService(t);return p&&(n.serviceUpdateOverride=p),t.caproverExtra&&(t.caproverExtra.containerHttpPort&&(n.containerHttpPort=t.caproverExtra.containerHttpPort),t.caproverExtra.notExposeAsWebApp&&(n.notExposeAsWebApp=!0)),a.apiManager.updateConfigAndSave(e,n)}))}))}},{key:"createDeploymentPromise",value:function(e,t){var a=this;return Promise.resolve().then((function(){var n,i={schemaVersion:2};t.image?i.imageName=t.image:i.dockerfileLines=null===(n=t.caproverExtra)||void 0===n?void 0:n.dockerfileLines;return a.apiManager.uploadCaptainDefinitionContent(e,i,"",!1)}))}}]),e}();var $t=function(){function e(t){Object(o.a)(this,e),this.onDeploymentStateChanged=t,this.deploymentHelper=new Jt,this.template=void 0}return Object(c.a)(e,[{key:"startDeployProcess",value:function(e,t){for(var a,n,i=this,s=JSON.stringify(e),r=0;r<e.caproverOneClickApp.variables.length;r++){var o=e.caproverOneClickApp.variables[r];a=o.id,n=t[o.id]||"",s=s.split(a).join(n)}try{this.template=JSON.parse(s)}catch(O){return void this.onDeploymentStateChanged({steps:["Parsing the template"],error:"Cannot parse: ".concat(s,"\n\n\n\n").concat(O),currentStep:0})}var c=this.createAppsArrayInOrder();if(c)if(0===c.length)i.onDeploymentStateChanged({steps:["Parsing the template"],error:"Cannot parse the template. No services found!!",currentStep:0});else{for(var l=[],d=0;d<c.length;d++){var p=c[d];l.push.apply(l,Object(Gt.a)(i.createDeploymentStepPromises(p.appName,p.service)))}for(var u=["Parsing the template"],h=0;h<l.length;h++)u.push(l[h].stepName);for(var j=0,b=function(){return new Promise((function(e){j++,i.onDeploymentStateChanged(G.copyObject({steps:u,error:"",currentStep:j,successMessage:j>=u.length?i.template.caproverOneClickApp.instructions.end:void 0})),e()}))},m=b(),f=0;f<l.length;f++){var g=l[f];m=m.then(g.stepPromise).then(b)}m.catch((function(e){i.onDeploymentStateChanged(G.copyObject({steps:u,error:"Failed: ".concat(e),currentStep:j}))}))}else i.onDeploymentStateChanged({steps:["Parsing the template"],error:"Cannot parse the template. Dependency tree cannot be resolved. Infinite loop!!",currentStep:0})}},{key:"createAppsArrayInOrder",value:function(){var e=[],t=0,a=this.template.services;Object.keys(a).forEach((function(e){t++}));for(var n=0;e.length<t;){if(n>t)return;n++,Object.keys(a).forEach((function(t){for(var n=0;n<e.length;n++){if(e[n].appName===t)return}for(var i=a[t],s=i.depends_on||[],r=0;r<s.length;r++){for(var o=s[r],c=!1,l=0;l<e.length;l++)o===e[l].appName&&(c=!0);if(!c)return}e.push({appName:t,service:i})}))}return e}},{key:"createDeploymentStepPromises",value:function(e,t){var a=[],n=this;return a.push({stepName:"Registering ".concat(e),stepPromise:function(){return n.deploymentHelper.createRegisterPromise(e,t)}}),a.push({stepName:"Configuring ".concat(e," (volumes, ports, environmental variables)"),stepPromise:function(){return n.deploymentHelper.createConfigurationPromise(e,t)}}),a.push({stepName:"Deploying ".concat(e," (might take up to a minute)"),stepPromise:function(){return n.deploymentHelper.createDeploymentPromise(e,t)}}),a}}]),e}(),Xt=a(698),Qt=Xt.a.Step,Zt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"createSteps",value:function(){for(var e=this.props.deploymentState.steps,t=[],a=0;a<e.length;a++)t.push({text:Object(J.jsxs)("span",{children:[Object(J.jsx)("span",{children:a!==this.props.deploymentState.currentStep||this.props.deploymentState.error?Object(J.jsx)("span",{}):Object(J.jsx)(Ae.a,{style:{fontSize:"16px",marginRight:12}})}),e[a]]}),key:e[a],icon:void 0});return t.map((function(e){return Object(J.jsx)(Qt,{icon:e.icon,title:e.text},e.key)}))}},{key:"isRunning",value:function(){var e=this.props.deploymentState,t=e.successMessage,a=e.error;return!t&&!a}},{key:"blockNavigationIfRunning",value:function(){return Object(J.jsx)(j.a,{when:this.isRunning(),message:"A deployment is running!\nAre you sure you want to leave this page?\nIt will interrupt the deployment at the current step, leaving the applications in potentially inconsistent state."})}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[e.blockNavigationIfRunning(),Object(J.jsx)("div",{children:Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:16},children:Object(J.jsxs)(x.a,{title:"Deploying your ".concat(this.props.appName),children:[Object(J.jsx)("p",{children:"This process takes a few minutes to complete. DO NOT refresh this page and DO NOT navigate away!!!"}),Object(J.jsxs)("div",{style:{padding:20},children:[Object(J.jsx)("h3",{children:"Progress:"}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(Xt.a,{status:e.props.deploymentState.error?"error":void 0,direction:"vertical",current:e.props.deploymentState.currentStep,children:e.createSteps()}),Object(J.jsxs)("div",{className:e.props.deploymentState.successMessage?"":"hide-on-demand",children:[Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(xe.a,{showIcon:!0,type:"success",message:Object(J.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:Object(J.jsx)(Wt.a,{children:e.props.deploymentState.successMessage||""})})}),Object(J.jsx)("div",{style:{height:80}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{style:{minWidth:150},size:"large",type:"primary",onClick:function(){return e.props.onFinishClicked()},children:"Finish"})})]}),Object(J.jsxs)("div",{className:e.props.deploymentState.error?"":"hide-on-demand",children:[Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(xe.a,{showIcon:!0,type:"error",message:e.props.deploymentState.error}),Object(J.jsx)("div",{style:{height:80}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{size:"large",type:"primary",onClick:function(){return e.props.onRestartClicked()},children:"Go Back & Try Again"})})]})]})]})})})})]})}}]),a}(n.Component),ea=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var i={};return n.props.oneClickAppVariables.forEach((function(e){var t=e.defaultValue;t&&(i[e.id]=t)})),n.state={enteredVariables:i,blurredFields:{}},n}return Object(c.a)(a,[{key:"onNextClicked",value:function(){var e=this,t=G.copyObject(e.state.blurredFields),a=!0;e.props.oneClickAppVariables.forEach((function(n){t[n.id]=!0,e.isFieldValueValid(n)||(a=!1)})),a?e.props.onNextClicked(e.state.enteredVariables):K.b.error("Fix all errors before deploying."),e.setState({blurredFields:t})}},{key:"isFieldValueValid",value:function(e){var t=this.state.enteredVariables[e.id]||"",a=!0;if(e.validRegex){var n=/\/(.*)\/(.*)/.exec(e.validRegex);n&&new RegExp(n[1],n[2]).test(t)||(a=!1)}return a}},{key:"createTextFields",value:function(){var e=this,t=this;return this.props.oneClickAppVariables.map((function(a){var n=t.state.enteredVariables[a.id];return Object(J.jsxs)("div",{style:{marginBottom:40},children:[Object(J.jsx)("h4",{children:a.label}),Object(J.jsx)("div",{style:{paddingBottom:5,fontSize:"90%"},className:a.description?"":"hide-on-demand",children:Object(J.jsx)(Wt.a,{remarkPlugins:[qt.a],children:a.description||""})}),Object(J.jsx)(k.a,{children:Object(J.jsxs)(de.a,{xs:{span:24},lg:{span:12},children:[Object(J.jsx)(y.a,{type:"text",placeholder:a.defaultValue,value:void 0===n?a.defaultValue:n,onChange:function(t){var n=G.copyObject(e.state.enteredVariables);n[a.id]=t.target.value,e.setState({enteredVariables:n})},onBlur:function(e){var n=G.copyObject(t.state.blurredFields);n[a.id]=!0,t.setState({blurredFields:n})}}),Object(J.jsx)("div",{style:{height:5}}),Object(J.jsx)(xe.a,{className:!t.state.blurredFields[a.id]||t.isFieldValueValid(a)?"hide-on-demand":"",showIcon:!0,message:Object(J.jsxs)("span",{children:["Invalid value. Does not match Regex:",Object(J.jsx)("code",{children:a.validRegex})]}),type:"error"})]})})]},a.id)}))}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{children:this.createTextFields()}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{size:"large",style:{minWidth:150},type:"primary",onClick:function(){return e.onNextClicked()},children:"Deploy"})})]})}}]),a}(n.Component),ta="$$cap_root_domain",aa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).oneClickAppDeployHelper=void 0,n.isUnmount=!1;var i=Object(f.a)(n);return n.state={apiData:void 0,rootDomain:"",deploymentState:void 0},n.oneClickAppDeployHelper=new $t((function(e){i.isUnmount||i.setState({deploymentState:e})})),n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this)&&Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this).call(this),this.isUnmount=!0}},{key:"componentDidMount",value:function(){var e,t=this,a=this.props.match.params.appName,n=new URLSearchParams(t.props.location.search),i=n.get("baseDomain");(a===_t?new Promise((function(e){e(JSON.parse(n.get(Ht)))})):t.apiManager.getOneClickAppByName(a,i).then((function(e){return e.appTemplate}))).then((function(e){return JSON.parse(G.replaceAllGenRandomForOneClickApp(JSON.stringify(e)))})).then((function(a){if("4"==="".concat(a.captainVersion))return a.caproverOneClickApp.variables=a.caproverOneClickApp.variables||[],a.caproverOneClickApp.variables.unshift({id:"$$cap_appname",label:"App Name",description:"This is your app name. Pick a name such as my-first-1-click-app",validRegex:"/^([a-z0-9]+\\-)*[a-z0-9]+$/"}),e=a,t.apiManager.getCaptainInfo();K.b.error("One-click app version is ".concat(a.captainVersion,', this version supports "v4". Make sure your CapRover is up-to-date with the latest version!!'))})).then((function(a){t.setState({apiData:e,rootDomain:a.rootDomain})})).catch(q.createCatcher())}},{key:"render",value:function(){var e=this,t=this.state.deploymentState,a=this.state.apiData,n=a&&a.caproverOneClickApp.displayName?a.caproverOneClickApp.displayName:e.props.match.params.appName[0].toUpperCase()+e.props.match.params.appName.slice(1);return a?t?Object(J.jsx)(Zt,{appName:e.props.match.params.appName,deploymentState:t,onFinishClicked:function(){return e.props.history.push("/apps")},onRestartClicked:function(){return e.setState({deploymentState:void 0})}}):Object(J.jsx)("div",{children:Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:16},children:Object(J.jsxs)(x.a,{title:"Setup your ".concat(n),children:[Object(J.jsx)("h2",{children:n}),Object(J.jsx)("p",{style:{whiteSpace:"pre-wrap",paddingLeft:15,paddingRight:15},children:Object(J.jsx)(Wt.a,{remarkPlugins:[qt.a],children:a.caproverOneClickApp.instructions.start})}),Object(J.jsx)("div",{style:{height:40}}),Object(J.jsx)(ea,{oneClickAppVariables:a.caproverOneClickApp.variables,onNextClicked:function(t){var a=G.copyObject(e.state.apiData),n=G.copyObject(t);a.caproverOneClickApp.variables.push({id:ta,label:"CapRover root domain"}),n.$$cap_root_domain=e.state.rootDomain,e.oneClickAppDeployHelper.startDeployProcess(a,n),Fe()}})]})})})}):Object(J.jsx)(Pe,{})}}]),a}(Y),na=function e(){Object(o.a)(this,e)};na.REDIRECT_TO_APPS_IF_READY_REQ_PARAM="redirectToAppsIfFullySetup";var ia=y.a.Search,sa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={userEmail:"",isLoading:!0,isForceChangingDomain:!1,apiData:void 0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.reFetchData()}},{key:"reFetchData",value:function(){var e=this;return e.setState({isLoading:!0,apiData:void 0}),this.apiManager.getCaptainInfo().then((function(t){e.setState({apiData:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"onForceSslClicked",value:function(){var e=this,t=window.location.href.startsWith("http://");ve.a.confirm({title:"Force HTTPS",content:Object(J.jsxs)("p",{children:["Once Force HTTPS is activated, all HTTP traffic is redirected to HTTPS.",t?"Since this is a one-way action, and there is no revert, it is highly recommended that you test the HTTPS website first.":""," ","Do you still want to proceed?"]}),onOk:function(){e.setState({isLoading:!0}),e.apiManager.forceSsl(!0).then((function(){ve.a.success({title:"Force HTTPS activated!",content:Object(J.jsx)("div",{children:Object(J.jsxs)("p",{children:["All HTTP traffic is now redirected to HTTPS."," ",t?"You will have to login again as you will now be redirected to HTTPS website.":""]})}),onOk:function(){t&&window.location.replace("https://".concat(e.state.apiData.captainSubDomain,".").concat(e.state.apiData.rootDomain))},onCancel:function(){t&&window.location.replace("https://".concat(e.state.apiData.rootDomain))}})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))},onCancel:function(){}})}},{key:"onEnableSslClicked",value:function(){var e=this,t="IGNORE";Promise.resolve().then((function(){return new Promise((function(t,a){ve.a.success({title:"Habilitar HTTPS",content:Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Spacecloud usa"," ",Object(J.jsx)(Ee,{url:"https://letsencrypt.org/",children:"Let's Encrypt"})," ","para proporcionar certificados SSL gratuitos (HTTPS). Esta direcci\xf3n de correo electr\xf3nico es muy importante ya que Let's Encrypt lo usa para la validaci\xf3n prop\xf3sitos Proporcione un correo electr\xf3nico v\xe1lido aqu\xed."]}),Object(J.jsxs)("p",{children:["IMPORTANTE: una vez que habilite HTTPS, no podr\xe1 edite el dominio ra\xedz nunca m\xe1s. Cerciorarse utiliza un buen dominio ra\xedz. una buena practica es ir un nivel m\xe1s profundo y configurar su dominio ra\xedz. Por ejemplo, si posee "," ",Object(J.jsx)("code",{children:"example.com"}),", use"," ",Object(J.jsx)("code",{children:"*.caprover-root.example.com"})," como su dominio ra\xedz. Esto le permitir\xe1 administre mejor sus subdominios, no use "," ",Object(J.jsx)("code",{children:"*.example.com"})," como ra\xedz dominio."]}),Object(J.jsx)(y.a,{placeholder:"your@email.com",type:"email",onChange:function(t){return e.setState({userEmail:(t.target.value||"").trim()})}})]}),onOk:function(){t(e.state.userEmail||"")},onCancel:function(){t(void 0)}})}))})).then((function(a){return void 0===a?t:(e.setState({isLoading:!0}),e.apiManager.enableRootSsl(a))})).then((function(a){if(a!==t)return ve.a.success({title:"\xa1HTTPS activado para el dominio ra\xedz!",content:Object(J.jsx)("div",{children:Object(J.jsxs)("p",{children:["Ahora puedes usar"," ",Object(J.jsx)("code",{children:"https://".concat(e.state.apiData.rootDomain)}),". El siguiente paso es forzar HTTPS para que no permita tr\xe1fico HTTP."]})})}),e.reFetchData()})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"updateRootDomainClicked",value:function(e){var t=this;t.state.apiData.hasRootSsl?ve.a.confirm({title:"Force Change Root Domain",content:Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Ya ha habilitado SSL para su dominio ra\xedz. Cambiar la URL del dominio ra\xedz invalidar\xe1 HTTPS en dominio ra\xedz y todos los subdominios predeterminados para aplicaciones si tener alguna aplicaci\xf3n."}),Object(J.jsx)("p",{children:"Todav\xeda puede volver a habilitar HTTPS despu\xe9s de cambiar la ra\xedz dominio."})]}),onOk:function(){t.performUpdateRootDomain(e,!0)},onCancel:function(){}}):t.performUpdateRootDomain(e,!1)}},{key:"performUpdateRootDomain",value:function(e,t){var a=this;this.apiManager.updateRootDomain(e,t).then((function(t){ve.a.success({title:"Root Domain Updated",content:Object(J.jsx)("div",{children:Object(J.jsx)("p",{children:"Haga clic en Aceptar para ser redirigido a su nueva ra\xedz dominio. Necesita iniciar sesi\xf3n de nuevo."})}),onOk:function(){window.location.replace("http://".concat(a.state.apiData.captainSubDomain,".").concat(e))}})})).catch(q.createCatcher())}},{key:"render",value:function(){var e=this;if(e.state.isLoading)return Object(J.jsx)(Pe,{});if(!e.state.apiData)return Object(J.jsx)(Ie,{});var t=new URLSearchParams(e.props.location.search);return this.state.apiData.forceSsl&&t.get(na.REDIRECT_TO_APPS_IF_READY_REQ_PARAM)?Object(J.jsx)(j.b,{to:"/apps"}):Object(J.jsxs)("div",{children:[e.createInitialSetupIfNoRootSsl(),Object(J.jsx)("br",{}),e.createPostFullSetupIfHasForceSsl(),Object(J.jsx)("br",{}),e.createSetupPanelIfNoForceSsl()]})}},{key:"createSetupPanelIfNoForceSsl",value:function(){var e=this;if(!this.state.apiData.forceSsl||e.state.isForceChangingDomain)return Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:16},children:Object(J.jsxs)(x.a,{title:"Spacecloud configuraciones dominio ra\xedz",children:[Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Lo primero que necesita Spacecloud es un dominio ra\xedz. Por ejemplo, si posee "," ",Object(J.jsx)("i",{children:"myawesomecompany.com"}),", puede usar"," ",Object(J.jsx)("i",{children:"captain.myawesomecompany.com"})," o "," ",Object(J.jsx)("i",{children:"foo.bar.myawesomecompany.com"})," como ra\xedz dominio. Primero, debe asegurarse de que la ip direcci\xf3n para todos los subdominios del dominio ra\xedz resuelva a la direcci\xf3n IP de Spacecloud. Para hacer esto, vaya a la configuraci\xf3n de DNS en su proveedor de dominio sitio web y establezca una entrada comod\xedn A.",Object(J.jsx)("br",{})," Por ejemplo: ",Object(J.jsx)("b",{children:" Escriba:"})," ",Object(J.jsx)("u",{children:"A"}),","," ",Object(J.jsx)("b",{children:"Nombre (o host):"})," ",Object(J.jsx)("u",{children:"*.spacecloud-root"}),",",Object(J.jsx)("b",{children:" IP (o Dirige a):"})," ",Object(J.jsx)("u",{children:"110.120.130.140"})," donde esta es la IP direcci\xf3n de su m\xe1quina Spacecloud."]}),Object(J.jsx)("p",{children:Object(J.jsxs)("i",{children:["NOTA: la configuraci\xf3n de DNS puede tardar varias horas para entrar en vigor. Mira"," ",Object(J.jsxs)(Ee,{url:"https://ca.godaddy.com/help/what-factors-affect-dns-propagation-time-1746",children:[" ","aqu\xed"]})," ","para m\xe1s detalles."]})})]}),Object(J.jsx)("hr",{}),Object(J.jsx)("br",{}),Object(J.jsx)(k.a,{children:Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Por ejemplo, si establece "," ",Object(J.jsx)("code",{children:"*.my-root.example.com"})," a la IP direcci\xf3n de su servidor, simplemente ingrese "," ",Object(J.jsx)("code",{children:"my-root.example.com"})," en el cuadro abajo:"]}),Object(J.jsx)("br",{}),Object(J.jsx)("div",{children:Object(J.jsx)(ia,{addonBefore:"[wildcard]\xa0.",placeholder:"my-root.example.com",defaultValue:e.state.apiData.rootDomain+"",enterButton:"Actualizar dominio",onSearch:function(t){return e.updateRootDomainClicked(t)}})})]})}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)(k.a,{justify:"end",children:[Object(J.jsx)(ke.a,{title:"Using Let's Encrypt Free Service",children:Object(J.jsx)(D.a,{disabled:e.state.apiData.hasRootSsl||!e.state.apiData.rootDomain,onClick:function(){return e.onEnableSslClicked()},children:"Habilitar HTTPS"})}),"\xa0\xa0",Object(J.jsx)(ke.a,{title:"Redirect all HTTP to HTTPS",children:Object(J.jsx)(D.a,{disabled:!e.state.apiData.hasRootSsl||e.state.apiData.forceSsl,onClick:function(){return e.onForceSslClicked()},children:"Forzar HTTPS"})})]})]})})})}},{key:"createInitialSetupIfNoRootSsl",value:function(){return this.state.apiData.hasRootSsl?Object(J.jsx)("div",{}):Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:16},children:Object(J.jsx)(x.a,{title:"Spacecloud configuraci\xf3n inicial \u2699\ufe0f",children:Object(J.jsxs)("div",{children:[Object(J.jsxs)("h3",{children:["\xa1Felicidades!"," ",Object(J.jsx)("span",{"aria-label":"Congrats",role:"img",children:"\ud83c\udf89\ud83c\udf89"})]}),Object(J.jsxs)("p",{children:[Object(J.jsx)("b",{})," \xa1Has instalado Spacecloud correctamente!"," ",Object(J.jsxs)("b",{children:["Pero a\xfan necesita asignar un dominio y termine la configuraci\xf3n de HTTPS para configurar completamente Spacecloud!"," "]}),"Puede configurar su instancia de Spacecloud en dos maneras:"]}),Object(J.jsxs)("ul",{children:[Object(J.jsxs)("li",{children:[Object(J.jsx)("b",{children:"Herramienta de l\xednea de comandos (RECOMENDADO): "})," activada su m\xe1quina local, simplemente ejecuta",Object(J.jsx)("br",{}),Object(J.jsx)("code",{children:"npm i -g caprover"}),Object(J.jsx)("br",{}),"seguido de",Object(J.jsx)("br",{}),Object(J.jsx)("code",{children:"configuraci\xf3n del servidor Spacecloud"}),". Despu\xe9s sigue la gu\xeda."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("b",{children:"Utilice el panel siguiente: "})," Este es un versi\xf3n no guiada de la l\xednea de comandos m\xe9todo. Use este m\xe9todo solo para el prop\xf3sito de experimentaci\xf3n"]})]})]})})})})}},{key:"createPostFullSetupIfHasForceSsl",value:function(){var e=this;if(this.state.apiData.forceSsl)return Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:16},children:Object(J.jsx)(x.a,{title:"Spacecloud",children:Object(J.jsxs)("div",{children:[Object(J.jsxs)("h3",{children:["\xa1Felicidades!"," ",Object(J.jsx)("span",{"aria-label":"Congrats",role:"img",children:"\ud83c\udf89\ud83c\udf89"})]}),Object(J.jsx)("p",{children:"Ha instalado y configurado Spacecloud \xa1exitosamente! \xa1Ya puede implementar sus aplicaciones! Recuerde, con CapRover, puede implementar aplicaciones desde el c\xf3digo fuente (como Node.js, PHP, Java, Ruby, Python, etc.), y tambi\xe9n puede implementar aplicaciones listas para usar como MySQL, \xa1MongoDB, WordPress, Redis y muchos m\xe1s!"}),Object(J.jsxs)("p",{children:["Para obtener m\xe1s informaci\xf3n sobre c\xf3mo implementar aplicaciones desde el c\xf3digo fuente, aseg\xfarese de tener un vistazo a nuestro",Object(J.jsxs)("a",{href:"https://caprover.com/docs/sample-apps.html",target:"_blank",rel:"noopener noreferrer",children:[" ","aplicaciones de muestra."]})]}),Object(J.jsx)("p",{children:Object(J.jsx)("i",{children:"Siempre puede actualizar su dominio ra\xedz, pero \xa1ten cuidado! Sus certificados SSL obtendr\xe1n revocado debido a este cambio de dominio."})}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{disabled:this.state.isForceChangingDomain,type:"ghost",onClick:function(){e.setState({isForceChangingDomain:!0})},children:"Cambiar el dominio ra\xedz de todos modos"})})]})})})})}}]),a}(Y),ra=a(350),oa=a(723),ca=a(724),la=function(){var e=Object(p.b)(),t=e.switcher,a=e.themes,i=Object(n.useState)(!1),s=Object(ra.a)(i,2),r=s[0],o=s[1];return Object(n.useEffect)((function(){var e=V.getDarkModeFromLocalStorage();o(e)}),[]),Object(J.jsx)(Me.a,{checkedChildren:Object(J.jsx)(oa.a,{}),unCheckedChildren:Object(J.jsx)(ca.a,{}),checked:r,onChange:function(e){V.setDarkModeInLocalStorage(e),t({theme:e?a.dark:a.light}),o(e)}})},da=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){W.isLoggedIn()?this.props.history.push("/dashboard?".concat(na.REDIRECT_TO_APPS_IF_READY_REQ_PARAM,"=true")):this.props.history.push("/login")}},{key:"render",value:function(){return Object(J.jsx)("div",{})}}]),a}(n.Component),pa=a(725),ua=a(727),ha=a(728),ja=a(699),ba=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsxs)("div",{className:"inner-card",style:{height:240,overflow:"hidden",borderRadius:5,marginBottom:8},children:[Object(J.jsx)("div",{style:{textAlign:"center",margin:16},children:Object(J.jsx)(ja.a,{style:{backgroundColor:this.props.color},size:64,icon:this.props.icon})}),Object(J.jsxs)("div",{style:{textAlign:"center"},children:[Object(J.jsxs)("h4",{children:[this.props.titleText,Object(J.jsx)("br",{}),this.props.titleNumber]}),Object(J.jsxs)("p",{children:[this.props.text1,Object(J.jsx)("br",{}),this.props.text2]})]})]})}}]),a}(n.Component),ma=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateApiInterval=void 0,n.state={apiData:void 0,isLoading:!0},n}return Object(c.a)(a,[{key:"updateApi",value:function(){var e=this;e.setState({isLoading:!e.state.apiData}),this.apiManager.getLoadBalancerInfo().then((function(t){e.setState({apiData:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"componentWillUnmount",value:function(){Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this)&&Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this).call(this),this.updateApiInterval&&clearInterval(this.updateApiInterval)}},{key:"componentDidMount",value:function(){var e=this;this.updateApi(),this.updateApiInterval=setInterval((function(){e.updateApi()}),2e4)}},{key:"render",value:function(){return this.state.isLoading?Object(J.jsx)(Pe,{}):this.state.apiData?Object(J.jsx)("div",{children:Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:22},children:Object(J.jsx)(x.a,{title:"Estad\xedsticas del equilibrador de carga",children:Object(J.jsxs)(k.a,{gutter:10,justify:"center",children:[Object(J.jsx)(de.a,{xs:{span:24},lg:{span:6},children:Object(J.jsx)(ke.a,{title:"Constantemente subiendo como refrescando los valores",children:Object(J.jsx)("div",{children:Object(J.jsx)(ba,{icon:Object(J.jsx)(pa.a,{}),color:"#2361ae",titleText:"Solicitudes totales",titleNumber:"".concat(this.state.apiData.total),text1:"",text2:""})})})}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:6},children:Object(J.jsx)(ba,{icon:Object(J.jsx)(ae.a,{}),color:"#23ae89",titleText:"Conexiones activas",titleNumber:"".concat(this.state.apiData.activeConnections),text1:"".concat(this.state.apiData.handled," Manejada"),text2:"".concat(this.state.apiData.accepted," Acceptadas")})}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:6},children:Object(J.jsx)(ba,{icon:Object(J.jsx)(ua.a,{}),color:"#d3a938",titleText:"Peticiones activas",titleNumber:"".concat(this.state.apiData.reading+this.state.apiData.writing),text1:"".concat(this.state.apiData.reading," Leyendo"),text2:"".concat(this.state.apiData.writing," Escribiendo")})}),Object(J.jsx)(de.a,{xs:{span:24},lg:{span:6},children:Object(J.jsx)(ba,{icon:Object(J.jsx)(ha.a,{}),color:"#ae2323",titleText:"Peticiones en espera",titleNumber:"".concat(this.state.apiData.waiting),text1:"  ",text2:"  "})})]})})})})}):Object(J.jsx)(Ie,{})}}]),a}(Y),fa=a(729),ga=a(730),Oa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:[Object(J.jsx)(Ee,{url:"https://github.com/netdata/netdata/",children:"NetData"})," ","es uno de los sistemas de monitoreo m\xe1s populares y poderosos herramientas que proporcionan una interfaz web. es un sistema para Rendimiento distribuido en tiempo real y supervisi\xf3n de la salud. Eso proporciona informaci\xf3n inigualable, en tiempo real, de todo sucediendo en el sistema que ejecuta (incluidas aplicaciones como como servidores web y de base de datos), utilizando la web interactiva moderna tableros de instrumentos"]}),Object(J.jsxs)("p",{children:["NetData es r\xe1pido y eficiente, dise\xf1ado para ejecutarse permanentemente en todos los sistemas (servidores f\xedsicos y virtuales, contenedores, dispositivos IoT), sin interrumpir su funci\xf3n principal. los la imagen actual de NetData incrustada en CapRover utiliza un valor predeterminado configuraci\xf3n para",Object(J.jsx)(Ee,{url:"https://docs.netdata.cloud/docs/anonymous-statistics/",children:"\xa0estadisticas"}),". Puede volver a compilar CapRover con una configuraci\xf3n personalizada diferente imagen si lo desea."]}),Object(J.jsxs)("p",{children:["Spacecloud proporciona una interfaz simple para habilitar NetData en su instancia de CapRover. Actualmente, CapRover solo admite instalando NetData en su ",Object(J.jsx)("b",{children:"nodo l\xedder"}),", es decir, el nodo donde reside la instancia de CapRover. Esta limitaci\xf3n se debe a una limitaci\xf3n en la interfaz de Docker,",Object(J.jsxs)(Ee,{url:"https://github.com/moby/moby/issues/25885/",children:[" ","ver aqu\xed"]}),"."]}),Object(J.jsxs)("p",{children:[Object(J.jsx)("i",{children:"Para obtener m\xe1s detalles sobre NetData, visite su "}),Object(J.jsx)(Ee,{url:"https://github.com/firehol/netdata/",children:"p\xe1gina de GitHub"}),"."]})]})}}]),a}(n.Component),va=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"changeModel",value:function(e,t,a){var n=G.copyObject(this.props.netDataInfo),i=n.data;i[e]||(i[e]={}),i[e][t]=a,this.props.updateModel(n)}},{key:"render",value:function(){var e=this,t=this.props.netDataInfo;return Object(J.jsxs)("div",{children:[Object(J.jsx)("h3",{children:"Notification Settings"}),Object(J.jsxs)("p",{children:["NetData offers multiple ways for you to receive notifications if something is going wrong with your server resource usage.",Object(J.jsx)("i",{children:"All notification options are completely OPTIONAL."})]}),Object(J.jsx)("hr",{}),Object(J.jsx)("br",{}),Object(J.jsx)("h4",{children:"Email (SMTP)"}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:20},children:Object(J.jsxs)(k.a,{gutter:20,align:"middle",children:[Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Recipient Email",Object(J.jsx)(y.a,{type:"text",placeholder:"alerts.receiver@example.com",value:t.data.smtp.to,onChange:function(t){return e.changeModel("smtp","to",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Server Tag",Object(J.jsx)(y.a,{type:"text",placeholder:"my-aws-server-01-anything",value:t.data.smtp.hostname,onChange:function(t){return e.changeModel("smtp","hostname",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["SMTP Server",Object(J.jsx)(y.a,{type:"text",placeholder:"smtp.gmail.com",value:t.data.smtp.server,onChange:function(t){return e.changeModel("smtp","server",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:6},children:["SMTP Port",Object(J.jsx)(y.a,{type:"number",placeholder:"587",value:t.data.smtp.port,onChange:function(t){return e.changeModel("smtp","port",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:6},children:["Unsecure",Object(J.jsx)(ye.a,{checked:!!t.data.smtp.allowNonTls,onChange:function(t){return e.changeModel("smtp","allowNonTls",t.target.checked)},children:"allow non-TLS"})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["SMTP Username",Object(J.jsx)(y.a,{type:"text",placeholder:"alerts.receiver@example.com",value:t.data.smtp.username,onChange:function(t){return e.changeModel("smtp","username",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["SMTP password",Object(J.jsx)(at,{defaultValue:t.data.smtp.password,onChange:function(t){return e.changeModel("smtp","password",t.target.value)}})]})]})})}),Object(J.jsx)("br",{}),Object(J.jsx)("h4",{children:"Slack"}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:24},lg:{span:20},children:Object(J.jsxs)(k.a,{gutter:20,align:"middle",children:[Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Slack Webhook",Object(J.jsx)(y.a,{type:"text",placeholder:"https://hooks.slack.com/services/XXXX",value:t.data.slack.hook,onChange:function(t){return e.changeModel("slack","hook",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Slack Channel",Object(J.jsx)(y.a,{type:"text",placeholder:"alertschannel",value:t.data.slack.channel,onChange:function(t){return e.changeModel("slack","channel",t.target.value)}})]})]})})}),Object(J.jsx)("br",{}),Object(J.jsx)("h4",{children:"Telegram"}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:24},lg:{span:20},children:Object(J.jsxs)(k.a,{gutter:20,align:"middle",children:[Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Bot Token",Object(J.jsx)(y.a,{type:"text",placeholder:"TELEGRAM_BOT_TOKEN",value:t.data.telegram.botToken,onChange:function(t){return e.changeModel("telegram","botToken",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Chat ID",Object(J.jsx)(y.a,{type:"text",placeholder:"Telegram Chat ID",value:t.data.telegram.chatId,onChange:function(t){return e.changeModel("telegram","chatId",t.target.value)}})]})]})})}),Object(J.jsx)("br",{}),Object(J.jsx)("h4",{children:"Push Bullet"}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:24},lg:{span:20},children:Object(J.jsxs)(k.a,{gutter:20,align:"middle",children:[Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Push Bullet API token",Object(J.jsx)(y.a,{type:"text",placeholder:"PUSH_BULLET_API_TOKEN",value:t.data.pushBullet.apiToken,onChange:function(t){return e.changeModel("pushBullet","apiToken",t.target.value)}})]}),Object(J.jsxs)(de.a,{className:"netdata-field",xs:{span:24},lg:{span:12},children:["Default Email (fallback receiver)",Object(J.jsx)(y.a,{type:"text",placeholder:"alerts.receiver@example.com",value:t.data.pushBullet.fallbackEmail,onChange:function(t){return e.changeModel("pushBullet","fallbackEmail",t.target.value)}})]})]})})})]})}}]),a}(n.Component),xa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={apiData:void 0,isLoading:!0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.refetchData()}},{key:"refetchData",value:function(){var e=this;return e.setState({isLoading:!0,apiData:void 0}),this.apiManager.getNetDataInfo().then((function(t){e.setState({apiData:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"toggleNetDataClicked",value:function(e){var t=G.copyObject(this.state.apiData);t.isEnabled=!!e,this.onUpdateNetDataClicked(t)}},{key:"onUpdateNetDataClicked",value:function(e){var t=this;return t.setState({isLoading:!0}),this.apiManager.updateNetDataInfo(e).then((function(){K.b.success(e.isEnabled?"NetData se inicia y actualiza!":"NetData se ha detenido!")})).catch(q.createCatcher()).then((function(){t.refetchData()}))}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return Object(J.jsx)(Pe,{});if(!this.state.apiData)return Object(J.jsx)(Ie,{});var t=this.state.apiData;return Object(J.jsx)("div",{children:Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{xs:{span:23},lg:{span:18},children:Object(J.jsxs)(x.a,{title:"Herramienta de monitoreo de NetData",children:[Object(J.jsx)(Oa,{}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{style:{height:30}}),Object(J.jsx)("div",{className:t.isEnabled?"hide-on-demand":"",children:Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{onClick:function(){return e.toggleNetDataClicked(!0)},type:"primary",children:Object(J.jsxs)("span",{children:["Iniciar NetData engine \xa0",Object(J.jsx)(fa.a,{})]})})})}),Object(J.jsxs)("div",{className:t.isEnabled?"":"hide-on-demand",children:[Object(J.jsxs)(k.a,{justify:"end",gutter:20,children:[Object(J.jsx)(D.a,{style:{marginRight:e.props.isMobile?0:40,marginBottom:e.props.isMobile?8:0},block:e.props.isMobile,onClick:function(){return e.toggleNetDataClicked(!1)},danger:!0,children:Object(J.jsxs)("span",{children:["Parar NetData \xa0",Object(J.jsx)(fa.a,{})]})}),Object(J.jsx)("a",{type:"submit",href:"//".concat(t.netDataUrl),target:"_blank",rel:"noopener noreferrer",style:{width:this.props.isMobile?"100%":"auto"},children:Object(J.jsx)(D.a,{block:e.props.isMobile,type:"primary",children:Object(J.jsxs)("span",{children:["Abrir NetData \xa0",Object(J.jsx)(ga.a,{})]})})})]}),Object(J.jsx)("div",{style:{height:30}}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{style:{height:30}}),Object(J.jsx)(va,{updateModel:function(t){e.setState({apiData:t})},netDataInfo:t}),Object(J.jsx)("br",{}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{type:"primary",onClick:function(){return e.onUpdateNetDataClicked(G.copyObject(e.state.apiData))},children:"Actualizar NetData"})})]})]})})})})}}]),a}(Y);var ya=Object(u.b)((function(e){return{isMobile:e.globalReducer.isMobile}}),void 0)(xa),ka=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsxs)("div",{children:[Object(J.jsx)(ma,{}),Object(J.jsx)("div",{style:{height:50}}),Object(J.jsx)(ya,{})]})}}]),a}(n.Component),Da=function e(){Object(o.a)(this,e)};Da.LOCAL_REG="LOCAL_REG",Da.REMOTE_REG="REMOTE_REG";var Ca="DEFAULT_REGISTRY_CHANGED";var Sa=a(165),Ta=Sa.a.Option,Aa="none",Ra="disabled push",Pa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isInEditMode:!1,newSelectedDefaultId:""},n}return Object(c.a)(a,[{key:"getDefaultRegText",value:function(){for(var e=this.props.apiData.registries,t=this.props.apiData.defaultPushRegistryId,a=0;a<e.length;a++){var n=e[a];if(n.id===t)return"".concat(n.registryUser," @ ").concat(n.registryDomain)}return Ra}},{key:"getAllOptions",value:function(){return G.copyObject(this.props.apiData.registries).map((function(e){return Object(J.jsx)(Ta,{value:e.id,children:"".concat(e.registryUser," @ ").concat(e.registryDomain)},e.id)}))}},{key:"render",value:function(){var e=this,t=this;return Object(J.jsxs)("div",{children:[Object(J.jsxs)(ve.a,{title:"Editar registro de inserci\xf3n",okText:"Guardar y actualizar",onCancel:function(){return t.setState({isInEditMode:!1})},onOk:function(){t.setState({isInEditMode:!1}),t.props.changeDefault(t.state.newSelectedDefaultId)},visible:t.state.isInEditMode,children:[Object(J.jsxs)("p",{children:["Default Docker Registry es el registro que ser\xe1 utilizado para almacenar sus im\xe1genes reci\xe9n construidas. Puedes elegir"," ",Object(J.jsx)("code",{children:Ra})," si no quieres empujar sus im\xe1genes reci\xe9n creadas en cualquier registro docker. Mantener dentro cuenta que si usas ",Object(J.jsx)("code",{children:Ra}),", nodos de cl\xfaster (si tiene m\xe1s de uno servidor) no podr\xe1 ejecutar sus aplicaciones."]}),Object(J.jsx)("p",{children:"Cambie el Registro de Docker predeterminado:"}),Object(J.jsxs)(Sa.a,{defaultValue:this.props.apiData.defaultPushRegistryId||Aa,style:{width:300},onChange:function(t){t===Aa?e.setState({newSelectedDefaultId:""}):e.setState({newSelectedDefaultId:t})},children:[Object(J.jsx)(Ta,{value:Aa,children:Ra}),t.getAllOptions()]}),Object(J.jsx)("div",{style:{marginTop:20},className:t.state.newSelectedDefaultId?"hide-on-demand":"",children:Object(J.jsx)(xe.a,{showIcon:!0,type:"warning",message:"Si tiene un cl\xfaster (m\xe1s de un servidor), necesita tener un registro de inserci\xf3n predeterminado. Si solo tiene un servidor, deshabilitar el registro de inserci\xf3n predeterminado est\xe1 bien."})})]}),Object(J.jsx)("h3",{children:"Registro de inserci\xf3n predeterminado"}),Object(J.jsxs)("p",{children:["Registro de Docker para enviar nuevas im\xe1genes:"," ",Object(J.jsxs)(Ne,{onLinkClicked:function(){t.setState({isInEditMode:!0,newSelectedDefaultId:t.props.apiData.defaultPushRegistryId||""})},children:[Object(J.jsx)("code",{children:this.getDefaultRegText()})," ",Object(J.jsx)(be.a,{})]})]})]})}}]),a}(n.Component),Na=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["La configuraci\xf3n de Docker Registry es ",Object(J.jsx)("b",{children:"solo necesaria"})," si planee ejecutar su CapRover en un cl\xfaster. Para un solo nodo Implementaciones de CapRover, Docker Registry no se recomienda como hace que la implementaci\xf3n sea significativamente m\xe1s lenta."]}),Object(J.jsx)(C.a,{children:Object(J.jsxs)(C.a.Panel,{header:"M\xe1s informaci\xf3n",children:[Object(J.jsx)("p",{children:"El registro de Docker es un repositorio para su compilado im\xe1genes Es similar a Github, o Bitbucket, con repositorios privados. Sin embargo, en lugar de la fuente c\xf3digo, contiene los artefactos construidos para su solicitud. Es necesario para el modo cl\xfaster, ya que otros nodos necesitan acceder a la imagen construida para para que su aplicaci\xf3n se ejecute en ellos."}),Object(J.jsx)("p",{children:"Spacecloud proporciona dos m\xe9todos para configurar su registro acoplable:"}),Object(J.jsxs)("ul",{children:[Object(J.jsxs)("li",{children:[Object(J.jsx)("b",{children:"Registro de Docker autohospedado:"})," Este es el forma m\xe1s sencilla de configurar un registro docker. CapRover crea una instancia de Docker Registry en la m\xe1quina principal y gestiona el registro para ti. Sin embargo, tiene su propia limitaci\xf3n. Si su m\xe1quina principal est\xe1 destruida, su local las im\xe1genes se perder\xe1n. En la mayor\xeda de los casos, esto no es un desastre ya que puede volver a implementar sus aplicaciones desde su c\xf3digo fuente.",Object(J.jsx)("br",{})]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("b",{children:"Registro remoto de Docker:"})," este enfoque depende de un servicio remoto para actuar como su Docker Registro. Con este enfoque, tendr\xe1 una cl\xfaster m\xe1s fiable, suponiendo que el tercero \xa1El servicio que usas es confiable! hay varios Servicios privados de Docker Registry disponibles: Registro de contenedores de Google, contenedor Amazon EC2 Registry, Quay, etc. Tenga en cuenta que este enfoque te cuesta dinero."]})]})]},"1")})]})}}]),a}(n.Component),wa="ADDING_LOCAL",Ia="ADDING_REMOTE",Ea=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={modalShowing:void 0,remoteRegistryToAdd:n.getPlainRegistryInfo()},n}return Object(c.a)(a,[{key:"getPlainRegistryInfo",value:function(){return{id:"",registryUser:"",registryPassword:"",registryDomain:"",registryImagePrefix:"",registryType:Da.REMOTE_REG}}},{key:"render",value:function(){var e=this,t=this.props.apiData.registries.map((function(e){return e.registryType})).indexOf(Da.LOCAL_REG)>=0;return Object(J.jsxs)("div",{children:[Object(J.jsx)(ve.a,{title:"Registro auto-hospedado",okText:"Habilitar registro auto-hospedado",onCancel:function(){return e.setState({modalShowing:void 0})},onOk:function(){e.setState({modalShowing:void 0}),e.props.addDockerRegistry({registryType:Da.LOCAL_REG})},visible:e.state.modalShowing===wa,children:Object(J.jsx)("p",{children:'Puede leer m\xe1s sobre este tipo de registro en el p\xe1gina detr\xe1s de este modal, espec\xedficamente en "M\xe1s informaci\xf3n" secci\xf3n. \xbfDesea continuar y habilitar el alojamiento propio? Registro Docker?'})}),Object(J.jsxs)(ve.a,{title:"Registro remoto",okText:"A\xf1adir registro remoto",onCancel:function(){return e.setState({modalShowing:void 0})},onOk:function(){e.setState({modalShowing:void 0}),e.props.addDockerRegistry(e.state.remoteRegistryToAdd)},visible:e.state.modalShowing===Ia,children:[Object(J.jsx)("p",{children:'Puede leer m\xe1s sobre este tipo de registro en el p\xe1gina detr\xe1s de este modal, espec\xedficamente en "M\xe1s informaci\xf3n" secci\xf3n.'}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("div",{style:{maxWidth:360},children:[Object(J.jsx)(y.a,{addonBefore:"Nombre de usuario",placeholder:"usuario | email@gmail.com",type:"email",value:e.state.remoteRegistryToAdd.registryUser,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToAdd);a.registryUser=t.target.value.trim(),e.setState({remoteRegistryToAdd:a})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(at,{addonBefore:"Contrase\xf1a",placeholder:"mypassword",defaultValue:e.state.remoteRegistryToAdd.registryPassword,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToAdd);a.registryPassword=t.target.value,e.setState({remoteRegistryToAdd:a})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(y.a,{addonBefore:"Dominio",placeholder:"registry-1.docker.io",type:"text",value:e.state.remoteRegistryToAdd.registryDomain,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToAdd);a.registryDomain=t.target.value.trim(),e.setState({remoteRegistryToAdd:a})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(y.a,{addonBefore:"Prefijo de imagen",placeholder:"usuario",addonAfter:Object(J.jsx)(ke.a,{title:"Sus im\xe1genes se etiquetar\xe1n como RegistryDomain/ImagePrefix/ImageName. Para la mayor\xeda de los proveedores, el prefijo de la imagen es exactamente su nombre de usuario, a menos que el campo DOMINIO sea espec\xedfico para usted, en ese caso, este prefijo est\xe1 vac\xedo.",children:Object(J.jsx)(Le.a,{})}),type:"text",value:e.state.remoteRegistryToAdd.registryImagePrefix,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToAdd);a.registryImagePrefix=t.target.value.trim(),e.setState({remoteRegistryToAdd:a})}})]})]}),Object(J.jsx)("div",{className:t?"hide-on-demand":"",children:Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{block:this.props.isMobile,onClick:function(){return e.setState({modalShowing:wa})},children:"Agregar registro auto-hospedado"})})}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{block:this.props.isMobile,onClick:function(){return e.setState({modalShowing:Ia,remoteRegistryToAdd:e.getPlainRegistryInfo()})},children:"Agregar registro remoto"})})]})}}]),a}(n.Component),La=a(731),Ma="EDITING_MODAL",Ua="DELETING_MODAL",Ba=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={modalShowing:void 0,remoteRegistryToEdit:void 0,registryIdToDelete:void 0},n}return Object(c.a)(a,[{key:"deleteRegistry",value:function(e){e!==this.props.apiData.defaultPushRegistryId?this.setState({registryIdToDelete:e,modalShowing:Ua}):ve.a.warn({title:"No se puede eliminar la inserci\xf3n predeterminada",content:Object(J.jsx)("div",{children:"Este registro est\xe1 configurado para ser el impulso predeterminado. No puedes elimine el registro de inserci\xf3n predeterminado. Para quitar, primero t\xfa necesita cambiar el registro push predeterminado a otro registro, o deshabilite completamente el push predeterminado registro. Luego, regresa y borra esto."})})}},{key:"editRegistry",value:function(e){e.registryType!==Da.LOCAL_REG?this.setState({modalShowing:Ma,remoteRegistryToEdit:G.copyObject(e)}):K.b.warn("No puede editar el registro autohospedado. Es administrado por Spacecloud.")}},{key:"getCols",value:function(){var e=this;return[{title:"Usuario",dataIndex:"registryUser"},{title:"Contrase\xf1a",dataIndex:"registryPassword",render:function(e){return Object(J.jsx)("span",{children:"Edit to see."})}},{title:"Dominio",dataIndex:"registryDomain"},{title:"Prefijo de imagen",dataIndex:"registryImagePrefix"},{title:"Acciones",dataIndex:"id",render:function(t,a){return Object(J.jsxs)("span",{children:[Object(J.jsx)(Ne,{onLinkClicked:function(){e.editRegistry(a)},children:Object(J.jsx)(La.a,{})}),"\xa0\xa0\xa0\xa0",Object(J.jsx)(Ne,{onLinkClicked:function(){e.deleteRegistry(a.id)},children:Object(J.jsx)(fe.a,{})})]})}}]}},{key:"createEditModalContent",value:function(){var e=this;return Object(J.jsxs)("div",{style:{maxWidth:360},children:[Object(J.jsx)(y.a,{addonBefore:"Nombre de usuario",placeholder:"Usuario | email@gmail.com",type:"email",value:e.state.remoteRegistryToEdit.registryUser,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToEdit);a.registryUser=t.target.value.trim(),e.setState({remoteRegistryToEdit:a})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(at,{addonBefore:"Contrase\xf1a",placeholder:"mypassword",defaultValue:e.state.remoteRegistryToEdit.registryPassword,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToEdit);a.registryPassword=t.target.value,e.setState({remoteRegistryToEdit:a})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(y.a,{addonBefore:"Dominio",placeholder:"registry-1.docker.io",type:"text",value:e.state.remoteRegistryToEdit.registryDomain,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToEdit);a.registryDomain=t.target.value.trim(),e.setState({remoteRegistryToEdit:a})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(y.a,{addonBefore:"Prefijo de imagen",placeholder:"usuario",addonAfter:Object(J.jsx)(ke.a,{title:"Your images will be tagged as RegistryDomain/ImagePrefix/ImageName. For most providers, Image Prefix is exactly your username, unless the field DOMAIN is specific to you, in that case, this prefix is empty.",children:Object(J.jsx)(Le.a,{})}),type:"text",value:e.state.remoteRegistryToEdit.registryImagePrefix,onChange:function(t){var a=G.copyObject(e.state.remoteRegistryToEdit);a.registryImagePrefix=t.target.value.trim(),e.setState({remoteRegistryToEdit:a})}})]})}},{key:"render",value:function(){var e=this;return Object(J.jsxs)("div",{children:[Object(J.jsx)(ve.a,{destroyOnClose:!0,title:"Confirmar borrado",okText:"Delete Registry",onCancel:function(){return e.setState({modalShowing:void 0})},onOk:function(){e.setState({modalShowing:void 0}),e.props.deleteRegistry(e.state.registryIdToDelete)},visible:e.state.modalShowing===Ua,children:"Are you sure you want to remote this registry from your list. You will no longer be able to push to or pull from this registry."}),Object(J.jsx)(ve.a,{destroyOnClose:!0,title:"Editar registro",okText:"Guardar y actualizar",onCancel:function(){return e.setState({modalShowing:void 0})},onOk:function(){e.setState({modalShowing:void 0}),e.props.editRegistry(G.copyObject(e.state.remoteRegistryToEdit))},visible:e.state.modalShowing===Ma,children:e.state.remoteRegistryToEdit?e.createEditModalContent():Object(J.jsx)("div",{})}),Object(J.jsx)("h3",{children:"Docker Registries"}),Object(J.jsx)("div",{children:this.props.isMobile?this.props.apiData.registries.map((function(t){return Object(J.jsxs)(x.a,{type:"inner",style:{marginBottom:8,wordWrap:"break-word"},title:t.registryDomain,children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Usuario:"})," ",t.registryImagePrefix]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Contrase\xf1a:"})," Edit to see."]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Dominio:"})," ",t.registryDomain]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Prefijo de imagen:"})," ",t.registryUser]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Acciones:"}),Object(J.jsxs)("span",{children:[Object(J.jsx)(Ne,{onLinkClicked:function(){e.editRegistry(t)},children:Object(J.jsx)(La.a,{})}),"\xa0\xa0\xa0\xa0",Object(J.jsx)(Ne,{onLinkClicked:function(){e.deleteRegistry(t.id)},children:Object(J.jsx)(fe.a,{})})]})]})]},t.id)})):Object(J.jsx)($e.a,{rowKey:"id",pagination:!1,columns:this.getCols(),dataSource:this.props.apiData.registries})})]})}}]),a}(n.Component),Va=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={apiData:void 0,isLoading:!0},n}return Object(c.a)(a,[{key:"fetchData",value:function(){var e=this;this.setState({apiData:void 0,isLoading:!0}),this.apiManager.getDockerRegistries().then((function(t){e.setState({apiData:t}),e.props.emitDefaultRegistryChanged(t.defaultPushRegistryId)})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"changeDefault",value:function(e){var t=this;this.setState({apiData:void 0,isLoading:!0}),this.apiManager.setDefaultPushDockerRegistry(e).then((function(){K.b.success("El registro de inserci\xf3n predeterminado se modific\xf3 correctamente.")})).catch(q.createCatcher()).then((function(){t.fetchData()}))}},{key:"deleteRegistry",value:function(e){var t=this,a=t.state.apiData.registries.map((function(t){return t.registryType===Da.LOCAL_REG&&t.id===e})).indexOf(!0)>=0;this.setState({apiData:void 0,isLoading:!0}),(a?this.apiManager.disableSelfHostedDockerRegistry():this.apiManager.deleteDockerRegistry(e)).then((function(){K.b.success("Registro eliminado.")})).catch(q.createCatcher()).then((function(){t.fetchData()}))}},{key:"editRegistry",value:function(e){var t=this;this.setState({apiData:void 0,isLoading:!0}),this.apiManager.updateDockerRegistry(e).then((function(){K.b.success("Registro actualizado.")})).catch(q.createCatcher()).then((function(){t.fetchData()}))}},{key:"addDockerRegistry",value:function(e){var t=this;this.setState({apiData:void 0,isLoading:!0}),(e.registryType===Da.LOCAL_REG?t.apiManager.enableSelfHostedDockerRegistry():t.apiManager.addDockerRegistry(e)).then((function(){K.b.success("\xa1Registro de Docker agregado con \xe9xito!")})).catch(q.createCatcher()).then((function(){t.fetchData()}))}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this;return this.state.isLoading?Object(J.jsx)(Pe,{}):this.state.apiData?Object(J.jsxs)("div",{children:[Object(J.jsx)(Na,{}),Object(J.jsx)("div",{style:{height:60}}),Object(J.jsx)("div",{style:{textAlign:"center"},className:0===this.state.apiData.registries.length?"":"hide-on-demand",children:Object(J.jsx)(xe.a,{type:"info",message:"A\xfan no se han a\xf1adido registros. \xa1Contin\xfae y agregue su primer registro!"})}),Object(J.jsxs)("div",{className:this.state.apiData.registries.length>0?"":"hide-on-demand",children:[Object(J.jsx)(Pa,{apiData:e.state.apiData,changeDefault:function(t){e.changeDefault(t)}}),Object(J.jsx)("div",{style:{height:40}}),Object(J.jsx)(Ba,{apiData:e.state.apiData,isMobile:this.props.isMobile,deleteRegistry:function(t){e.deleteRegistry(t)},editRegistry:function(t){e.editRegistry(t)}})]}),Object(J.jsx)("div",{style:{height:50}}),Object(J.jsx)(Ea,{apiData:e.state.apiData,isMobile:this.props.isMobile,addDockerRegistry:function(t){return e.addDockerRegistry(t)}})]}):Object(J.jsx)(Ie,{})}}]),a}(Y);var _a=Object(u.b)((function(e){return{defaultRegistryId:e.registryReducer.defaultRegistryId,isMobile:e.globalReducer.isMobile}}),{emitDefaultRegistryChanged:function(e){return{type:Ca,payload:e}}})(Va),Ha=a(691),Fa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={nodeToAdd:{remoteNodeIpAddress:"",sshPort:"22",sshUser:"root",captainIpAddress:e.leaderIp||"",nodeType:"worker",privateKey:""}},n}return Object(c.a)(a,[{key:"changeModel",value:function(e,t){var a=G.copyObject(this.state.nodeToAdd);a[e]=t,this.setState({nodeToAdd:a})}},{key:"render",value:function(){var e=this,t=e.state.nodeToAdd;return Object(J.jsx)("div",{children:Object(J.jsxs)(x.a,{style:{marginTop:16},type:"inner",title:"A\xf1adir nuevo nodo",children:[Object(J.jsxs)(k.a,{justify:"space-between",children:[Object(J.jsx)(de.a,{lg:{span:11},xs:{span:24},children:Object(J.jsx)(y.a,{style:{marginBottom:10},addonBefore:"Nueva IP del nodo",placeholder:"123.123.123.123",type:"text",value:t.remoteNodeIpAddress,onChange:function(t){return e.changeModel("remoteNodeIpAddress",t.target.value)}})}),Object(J.jsx)(de.a,{lg:{span:11},xs:{span:24},children:Object(J.jsx)(y.a,{style:{marginBottom:10},addonBefore:"Direcci\xf3n IP Spacecloud",placeholder:"123.123.123.123",type:"text",value:t.captainIpAddress,onChange:function(t){return e.changeModel("captainIpAddress",t.target.value)}})}),Object(J.jsxs)(de.a,{span:24,style:{marginTop:10},children:[Object(J.jsxs)("div",{style:{paddingBottom:5},children:["\xa0Clave privada SSH para ",Object(J.jsx)("b",{children:"root"}),"\xa0",Object(J.jsx)(ke.a,{title:"Utilice la clave RSA. Otros tipos, como Ed25519, no son compatibles, para estos utilice el m\xe9todo alternativo a continuaci\xf3n.",children:Object(J.jsx)(Le.a,{style:{paddingTop:8,paddingLeft:8}})})]}),Object(J.jsx)(y.a.TextArea,{style:{marginBottom:20},className:"code-input",rows:6,placeholder:"-----BEGIN RSA PRIVATE KEY-----\nMIICWwIBAAKBgQDArfs81aizq8ckg16e+ewFgJg7J...",value:t.privateKey,onChange:function(t){return e.changeModel("privateKey",t.target.value)}})]})]}),Object(J.jsxs)(k.a,{justify:"end",children:[Object(J.jsxs)(S.a.Group,{defaultValue:"a",buttonStyle:"outline",style:{marginBottom:20},value:t.nodeType,onChange:function(t){return e.changeModel("nodeType",t.target.value)},children:[Object(J.jsx)(S.a.Button,{value:"worker",children:"Unirse como nodo esclavo"}),Object(J.jsx)(S.a.Button,{value:"manager",children:"Unirse como nodo principal"})]}),"\xa0",Object(J.jsx)(ke.a,{title:"Sugerencia: por cada 5 trabajadores, agregue 2 nodos de administrador, manteniendo el recuento de nodos de administrador como un n\xfamero impar. Por lo tanto, use el nodo trabajador para los primeros 4 nodos que agregue a su cl\xfaster.",children:Object(J.jsx)(Le.a,{style:{paddingTop:8,paddingLeft:8}})})]}),Object(J.jsxs)(k.a,{justify:"end",children:[Object(J.jsx)(de.a,{lg:{span:6},xs:{span:24},style:{maxWidth:250},children:Object(J.jsx)(y.a,{addonBefore:"Puerto SSH",type:"text",value:t.sshPort,onChange:function(t){return e.changeModel("sshPort",t.target.value)}})}),Object(J.jsx)(de.a,{lg:{span:6},xs:{span:24},style:{maxWidth:250,marginLeft:10},children:Object(J.jsx)(ke.a,{title:"El uso de usuarios no root con acceso sudo NO funcionar\xe1. Si desea utilizar una cuenta que no sea ra\xedz, debe poder ejecutar los comandos de la ventana acoplable sin sudo. O simplemente use el m\xe9todo alternativo a continuaci\xf3n.",children:Object(J.jsx)(y.a,{addonBefore:"Usuario SSH",type:"text",value:t.sshUser,onChange:function(t){return e.changeModel("sshUser",t.target.value)}})})}),Object(J.jsxs)(D.a,{style:{marginLeft:10},type:"primary",block:this.props.isMobile,onClick:function(){return e.props.onAddNodeClicked(e.state.nodeToAdd)},children:[Object(J.jsx)(ae.a,{})," \xa0 Unirse al cluster"]})]}),Object(J.jsx)("div",{style:{height:50}}),Object(J.jsx)(C.a,{children:Object(J.jsxs)(C.a.Panel,{header:"Alternative Method",children:[Object(J.jsx)("p",{children:"CapRover usa SSH para conectarse a sus nodos y hacer que se unan al grupo. A veces, esto el proceso no funciona debido a SSH no est\xe1ndar configuraciones como puertos personalizados, nombres de usuario personalizados, y etc."}),Object(J.jsxs)("p",{children:["En estos casos, ser\xe1 mucho m\xe1s sencillo ejecutar los comandos manualmente desde un SSH sesi\xf3n. Primero, de su"," ",Object(J.jsx)("b",{children:"nodo l\xedder principal"}),", ejecute lo siguiente dominio:"]}),Object(J.jsx)("code",{children:"docker swarm join-token worker"}),Object(J.jsx)("p",{style:{marginTop:20},children:"Saldr\xe1 algo como esto:"}),Object(J.jsxs)("code",{children:["Para agregar un trabajador a este enjambre, ejecute lo siguiente dominio:",Object(J.jsx)("br",{}),"docker swarm join --token SWMTKN-secret-token-here 127.0.0.1:2377"]}),Object(J.jsx)("p",{style:{marginTop:20},children:"Luego, copie el comando de la salida de arriba, y simplemente desde el nodo trabajador, ejecute eso dominio."}),Object(J.jsxs)("p",{style:{marginTop:20},children:["Luego, copie el comando de la salida de arriba, y simplemente desde el nodo trabajador, ejecute eso dominio.",Object(J.jsxs)("code",{children:[" ","--advertise-addr WORKER_EXTERNAL_IP:2377"]}),". Ver"," ",Object(J.jsxs)("a",{href:"https://github.com/caprover/caprover/issues/572",target:"_blank",rel:"noopener noreferrer",children:[" ","este problema"," "]})," ","para m\xe1s detalles."]})]},"1")})]})})}}]),a}(n.Component),za=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={apiData:void 0,isLoading:!0},n}return Object(c.a)(a,[{key:"fetchData",value:function(){var e=this;e.setState({apiData:void 0,isLoading:!0}),e.apiManager.getAllNodes().then((function(t){e.setState({apiData:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"addNode",value:function(e){var t=this;t.setState({apiData:void 0,isLoading:!0}),t.apiManager.addDockerNode(e.nodeType,e.privateKey,e.remoteNodeIpAddress,e.sshPort,e.sshUser,e.captainIpAddress).then((function(){K.b.success("Nodo a\xf1adido correctamente!")})).catch(q.createCatcher()).then((function(){t.fetchData()}))}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"createNodes",value:function(){return(this.state.apiData.nodes||[]).map((function(e){return Object(J.jsxs)("div",{className:"inner-card",style:{paddingTop:15,paddingBottom:20,paddingRight:20,paddingLeft:20,marginBottom:40,borderRadius:5},children:[Object(J.jsxs)(k.a,{justify:"center",children:[Object(J.jsx)("b",{children:"ID del nodo:\xa0\xa0"})," ",e.nodeId]}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{style:{height:10}}),Object(J.jsxs)(k.a,{children:[Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"Tipo: "}),e.isLeader?"Leader (Main Node)":e.type]}),Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"IP: "}),e.ip]})]}),Object(J.jsxs)(k.a,{children:[Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"Estado: "}),e.state]}),Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"Estatus: "}),e.status]})]}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"RAM: "}),(e.memoryBytes/1073741824).toFixed(2)," GB"]}),Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"OS: "}),e.operatingSystem]})]}),Object(J.jsxs)(k.a,{children:[Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"CPU: "}),(e.nanoCpu/1e9).toFixed(0)," cores"]}),Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"Arquitectura: "}),e.architecture]})]}),Object(J.jsx)("br",{}),Object(J.jsxs)(k.a,{children:[Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"Hostname: "}),e.hostname]}),Object(J.jsxs)(de.a,{lg:{span:12},xs:{span:24},children:[Object(J.jsx)("b",{children:"Versi\xf3n de Docker: "}),e.dockerEngineVersion]})]})]},e.nodeId)}))}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return Object(J.jsx)(Pe,{});if(!this.state.apiData)return Object(J.jsx)(Ie,{});var t=this.state.apiData.nodes||[],a="";try{a=t.filter((function(e){return e.isLeader}))[0].ip}catch(n){w.error(n)}return Object(J.jsxs)("div",{children:[this.props.defaultRegistryId?Object(J.jsx)(Fa,{leaderIp:a,isMobile:this.props.isMobile,onAddNodeClicked:function(t){e.addNode(t)}}):Object(J.jsx)("div",{children:Object(J.jsx)(xe.a,{type:"warning",showIcon:!0,message:"No se pueden agregar m\xe1s nodos porque no se ha establecido ning\xfan registro de inserci\xf3n predeterminado. Para agregar m\xe1s nodos y crear un cl\xfaster, primero debe agregar un registro docker y configurarlo como el registro de inserci\xf3n predeterminado."})}),Object(J.jsx)("div",{style:{height:50}}),Object(J.jsx)(Ha.a,{type:"horizontal",children:Object(J.jsx)("h4",{children:"Nodos del cluster actuales"})}),Object(J.jsx)("div",{style:{height:30}}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{lg:{span:14},xs:{span:23},children:e.createNodes()})})]})}}]),a}(Y);var Wa=Object(u.b)((function(e){return{defaultRegistryId:e.registryReducer.defaultRegistryId,isMobile:e.globalReducer.isMobile}}))(za),Ka=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsxs)("div",{children:[Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{lg:{span:20},xs:{span:23},children:Object(J.jsx)(x.a,{title:"Configuraci\xf3n del registro de Docker",children:Object(J.jsx)(_a,{})})})}),Object(J.jsx)("div",{style:{height:35}}),Object(J.jsx)(k.a,{justify:"center",children:Object(J.jsx)(de.a,{lg:{span:20},xs:{span:23},children:Object(J.jsx)(x.a,{title:"Nodos",children:Object(J.jsx)(Wa,{})})})})]})}},{key:"componentDidMount",value:function(){}}]),a}(n.Component),qa=a(732),Ga=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLoading:!1},n}return Object(c.a)(a,[{key:"onCreateBackupClicked",value:function(){var e=this;e.setState({isLoading:!0}),e.apiManager.createBackup().then((function(t){var a=document.createElement("a");a.setAttribute("href","".concat(e.apiManager.getApiBaseUrl(),"/downloads/?namespace=captain&downloadToken=").concat(encodeURIComponent(t.downloadToken))),a.click(),K.b.success("Downloading backup started...")})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this;return this.state.isLoading?Object(J.jsx)(Pe,{}):Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Cree una copia de seguridad de las configuraciones de CapRover para poder hacer girar un clon de este servidor. Tenga en cuenta que su aplicaci\xf3n los datos (vol\xfamenes e im\xe1genes) no forman parte de esta copia de seguridad. Este La copia de seguridad solo incluye los detalles de configuraci\xf3n del servidor, como como dominios ra\xedz, nombres de aplicaciones, certificados SSL, etc."}),Object(J.jsx)("p",{children:"Consulte los documentos para obtener m\xe1s detalles sobre c\xf3mo restaurar su servidor utilizando el archivo de copia de seguridad."}),Object(J.jsx)("p",{children:"Tenga en cuenta que esto es, actualmente, una CARACTER\xcdSTICA EXPERIMENTAL."}),Object(J.jsx)("br",{}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsxs)(D.a,{type:"primary",block:this.props.isMobile,onClick:function(){return e.onCreateBackupClicked()},children:[Object(J.jsx)("span",{children:Object(J.jsx)(qa.a,{})})," ","\xa0 Crear Backup"]})})]})}}]),a}(Y),Ya=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,old:"",new1:"",new2:""},n}return Object(c.a)(a,[{key:"onChangePasswordClicked",value:function(){var e=this;this.state.new1?this.state.new1===this.state.new2?(this.setState({isLoading:!0}),this.apiManager.changePass(this.state.old,this.state.new1).then((function(){K.b.success("\xa1Contrase\xf1a cambiada con \xe9xito!")})).catch(q.createCatcher()).then((function(){e.apiManager.getAuthToken(e.state.new1),e.setState({isLoading:!1})}))):K.b.error("La confirmaci\xf3n de nuevas contrase\xf1as no coincide"):K.b.error("La nueva contrase\xf1a no puede estar vac\xeda")}},{key:"render",value:function(){var e=this;return this.state.isLoading?Object(J.jsx)(Pe,{}):Object(J.jsxs)("div",{children:["Contrase\xf1a anterior",Object(J.jsx)(y.a.Password,{onChange:function(t){return e.setState({old:t.target.value})}}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{style:{height:20}}),"Nueva contrase\xf1a",Object(J.jsx)(y.a.Password,{maxLength:30,onChange:function(t){return e.setState({new1:t.target.value})}}),Object(J.jsx)("div",{style:{height:20}}),"Confirmar nueva contrase\xf1a",Object(J.jsx)(y.a.Password,{maxLength:30,onChange:function(t){return e.setState({new2:t.target.value})}}),Object(J.jsx)("div",{style:{height:40}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{block:this.props.isMobile,onClick:function(){return e.onChangePasswordClicked()},type:"primary",children:"Cambiar contrase\xf1a"})})]})}}]),a}(Y),Ja=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).hasAlreadyActivated=void 0,n.hasAlreadyActivated=!1,n.state={timeToRefresh:0},n}return Object(c.a)(a,[{key:"startTimer",value:function(){var e=this;e.setState({timeToRefresh:60}),setInterval((function(){e.state.timeToRefresh<2?window.location.reload(!0):e.setState({timeToRefresh:e.state.timeToRefresh-1})}),1e3)}},{key:"render",value:function(){var e=this;return e.props.isRefreshTimerActivated&&!this.hasAlreadyActivated&&(this.hasAlreadyActivated=!0,setTimeout((function(){return e.startTimer()}),10)),Object(J.jsx)("div",{children:Object(J.jsx)(ve.a,{closable:!1,footer:Object(J.jsx)("div",{}),title:"Update Process Started",visible:e.state.timeToRefresh>0,children:Object(J.jsxs)("div",{children:[e.props.children,Object(J.jsxs)("p",{children:[Object(J.jsx)("b",{children:"Time to Refresh: "}),this.state.timeToRefresh]})]})})})}}]),a}(n.Component),$a=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={versionInfo:void 0,isRefreshTimerActivated:!1,isLoading:!0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;e.setState({isLoading:!0}),e.apiManager.getVersionInfo().then((function(t){e.setState({versionInfo:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"onPerformUpdateClicked",value:function(){var e=this,t=this.state.versionInfo;e.setState({isLoading:!0}),e.apiManager.performUpdate(t.latestVersion).then((function(){e.setState({isRefreshTimerActivated:!0})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return Object(J.jsx)(Pe,{});var t=this.state.versionInfo;return t?Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Spacecloud permite instalar actualizaciones en el lugar. Sin embargo, Siempre lea los registros de cambios antes de actualizar su CapRover. Puede haber cambios importantes que debe tener en cuenta de. La actualizaci\xf3n suele tardar unos 60 segundos y su CapRover puede dejar de responder hasta que finalice el proceso de actualizaci\xf3n. acabado. Sus aplicaciones seguir\xe1n siendo funcionales y receptivas durante este tiempo, excepto por un per\xedodo muy corto de 10 segundos o menos."}),Object(J.jsx)("br",{}),Object(J.jsxs)("p",{children:[Object(J.jsx)("b",{children:"Versi\xf3n actual"}),": ",t.currentVersion]}),Object(J.jsxs)("p",{children:[Object(J.jsx)("b",{children:"\xdaltima versi\xf3n estable"}),": ",t.latestVersion]}),Object(J.jsx)("div",{children:Object(J.jsx)("p",{className:t.changeLogMessage?"pre-line-content":"hide-on-demand",children:t.changeLogMessage})}),Object(J.jsx)("div",{className:t.canUpdate?"":"hide-on-demand",children:Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsxs)(D.a,{type:"primary",block:this.props.isMobile,onClick:function(){return e.onPerformUpdateClicked()},children:[Object(J.jsx)("span",{children:Object(J.jsx)(qa.a,{})})," ","\xa0 Instalar actualizaci\xf3n"]})})}),Object(J.jsx)("div",{className:t.canUpdate?"hide-on-demand":"",children:Object(J.jsx)(xe.a,{message:"Tu Spacecloud tiene la \xfaltima versi\xf3n.",type:"info"})}),Object(J.jsx)(Ja,{isRefreshTimerActivated:this.state.isRefreshTimerActivated,children:Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"La actualizaci\xf3n tarda aproximadamente un minuto en completarse dependiendo de la velocidad de conexi\xf3n de su servidor."}),Object(J.jsx)("p",{children:"Su tablero CapRover no funciona durante el actualizar. Espere hasta que esta p\xe1gina se actualice autom\xe1ticamente."}),Object(J.jsx)("p",{children:"Es posible que vea un error de nginx brevemente despu\xe9s de la actualizar. Pero se arreglar\xe1 solo en unos segundos."}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]})})]}):Object(J.jsx)(Ie,{})}}]),a}(Y),Xa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getCols",value:function(){return[{title:"Image ID",dataIndex:"imageId",render:function(e){return e=e||"",Object(J.jsxs)("div",{style:{width:150,fontSize:"90%"},children:[e.substr(0,Math.min(e.length,25)),"..."]})}},{title:"Associated Tags",dataIndex:"imageName",render:function(e){return e=e||"",Object(J.jsx)("div",{style:{whiteSpace:"pre-line",fontSize:"90%"},children:e})}}]}},{key:"getData",value:function(){for(var e=[],t=0;t<this.props.unusedImages.length;t++){var a=this.props.unusedImages[t];e.push({key:a.id,imageId:a.id,imageName:a.tags.join("\n")})}return e}},{key:"getRowSelection",value:function(){var e=this;return{onChange:function(t,a){console.log(t),e.props.updateModel(t)},getCheckboxProps:function(e){return{disabled:!1,name:e.imageId}}}}},{key:"render",value:function(){var e=this;return this.props.isMobile?this.getData().map((function(t,a){var n=t.key,i=t.imageId,s=t.imageName;return Object(J.jsxs)(x.a,{type:"inner",style:{marginBottom:8,wordWrap:"break-word"},title:Object(J.jsx)(ye.a,{checked:e.props.selectedImagesForDelete.indexOf(i)>-1,onChange:function(t){var a=Object(Gt.a)(e.props.selectedImagesForDelete),n=a.indexOf(i);n>-1?a.splice(n,1):a.push(i),e.props.updateModel(a)},children:s?s.split("\n")[0]:"No Name"}),children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Image ID:"})," ",i]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"Associated Tag:"})," ",s||"n/a"]})]},n)})):Object(J.jsx)("div",{children:Object(J.jsx)($e.a,{pagination:!1,rowSelection:this.getRowSelection(),columns:this.getCols(),dataSource:this.getData()})})}}]),a}(n.Component),Qa=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,mostRecentLimit:2,selectedImagesForDelete:[],unusedImages:[]},n}return Object(c.a)(a,[{key:"onRemoveImagesClicked",value:function(){var e=this;this.setState({isLoading:!0}),this.apiManager.deleteImages(this.state.selectedImagesForDelete).then((function(){K.b.success("Unused images are deleted."),e.refreshOldImagesList()})).catch(q.createCatcher((function(){e.setState({isLoading:!1})})))}},{key:"refreshOldImagesList",value:function(){var e=this;return this.setState({unusedImages:void 0,isLoading:!0}),this.apiManager.getUnusedImages(this.state.mostRecentLimit).then((function(t){e.setState({unusedImages:t.unusedImages})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this;if(t.state.isLoading)return Object(J.jsx)(Pe,{});var a=this.state.unusedImages;if(!a)return Object(J.jsx)(Ie,{});var n=!(!t.state.selectedImagesForDelete||!t.state.selectedImagesForDelete.length);return Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Cada vez que implementa una nueva compilaci\xf3n, Docker crea una nueva imagen para ti. Por lo general, una gran parte de esta imagen es compartida entre la versi\xf3n antigua y la nueva versi\xf3n, pero se agrega una peque\xf1a porci\xf3n a su disco con cada compilaci\xf3n. T\xfa Puede leer m\xe1s sobre la limpieza del disco en los documentos, pero como interfaz simple, este widget le da la capacidad de realizar limpiezas de im\xe1genes a pedido."}),Object(J.jsx)("p",{children:"Puede realizar esta acci\xf3n, despu\xe9s de cada implementaci\xf3n. Pero es normalmente no se necesita con esa frecuencia. para tipico proyectos medianos, se recomienda realizar esto limpieza despu\xe9s de cada ~ 20 compilaciones."}),Object(J.jsx)("p",{children:"Con par\xe1metro por defecto, mantiene los dos \xfaltimos recientes compilaciones de todas las aplicaciones actuales y crea una lista de im\xe1genes que se pueden eliminar (haciendo clic en el bot\xf3n Obtener lista). Puede seleccionar las im\xe1genes que desea eliminar y hacer clic en en el bot\xf3n Eliminar im\xe1genes. Podr\xedas notar que algunos las im\xe1genes no se eliminan aunque haya hecho clic en Eliminar Im\xe1genes, significa que est\xe1n siendo directa o indirectamente en uso por Docker. Un ejemplo com\xfan para el uso indirecto es una imagen cuya imagen secundaria est\xe1 siendo utilizada por un ser vivo envase."}),Object(J.jsx)("br",{})]}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(de.a,{span:12,children:Object(J.jsx)(ke.a,{title:"Por ejemplo, ingrese 2 para excluir las 2 compilaciones m\xe1s recientes durante la limpieza",children:Object(J.jsx)(y.a,{addonBefore:"Mantener el m\xe1s reciente",type:"number",value:this.state.mostRecentLimit+"",onChange:function(t){e.setState({mostRecentLimit:Number(t.target.value)})}})})}),Object(J.jsx)(de.a,{span:12,children:Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsxs)(D.a,{type:"default",onClick:function(){return e.refreshOldImagesList()},children:[Object(J.jsx)("span",{children:Object(J.jsx)(ua.a,{})})," ","\xa0 Obtener lista"]})})})]}),Object(J.jsxs)("div",{className:a.length>0?"":"hide-on-demand",children:[Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(ke.a,{title:n?"":"Seleccione las im\xe1genes que desea eliminar. Puede seleccionar todo desde la fila superior.",children:Object(J.jsxs)(D.a,{disabled:!n,type:"primary",block:this.props.isMobile,onClick:function(){t.onRemoveImagesClicked()},children:[Object(J.jsxs)("span",{children:[Object(J.jsx)(fe.a,{})," "]})," ","\xa0 Eliminar im\xe1genes no utilizadas"]})})}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsxs)("div",{children:[Object(J.jsx)("b",{children:"NOTA: "})," Las im\xe1genes que se utilizan (directa o indirectamente) no se eliminar\xe1n incluso si los selecciona."]}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(Xa,{unusedImages:a,isMobile:this.props.isMobile,selectedImagesForDelete:this.state.selectedImagesForDelete,updateModel:function(t){return e.setState({selectedImagesForDelete:t})}})]})]})}}]),a}(Y),Za=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,nginxConfig:void 0,isRefreshTimerActivated:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;e.setState({isLoading:!0}),this.apiManager.getNginxConfig().then((function(t){e.setState({nginxConfig:t})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"onLoadDefaultNginxConfigClicked",value:function(){var e=G.copyObject(this.state.nginxConfig);e.baseConfig.customValue=e.baseConfig.byDefault,e.captainConfig.customValue=e.captainConfig.byDefault,this.setState({nginxConfig:e})}},{key:"onUpdateNginxConfigClicked",value:function(){var e=this,t=G.copyObject(this.state.nginxConfig);e.setState({isLoading:!0}),this.apiManager.setNginxConfig(t.baseConfig.customValue,t.captainConfig.customValue).then((function(){e.setState({isRefreshTimerActivated:!0})})).catch(q.createCatcher()).then((function(){e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this;if(e.state.isLoading)return Object(J.jsx)(Pe,{});var t=this.state.nginxConfig;return t?Object(J.jsxs)("div",{children:[Object(J.jsx)(Ja,{isRefreshTimerActivated:e.state.isRefreshTimerActivated,children:Object(J.jsxs)("div",{children:["Nginx se actualiz\xf3 con \xe9xito, CapRover se reiniciar\xe1 en 30 segundos."," ",Object(J.jsx)("b",{children:"Por favor espere hasta que la p\xe1gina sea autom\xe1ticamente renovado"}),Object(J.jsx)("br",{}),Object(J.jsx)("br",{})]})})," ",Object(J.jsx)("p",{children:"Spacecloud te permite establecer configuraciones personalizadas para su enrutador nginx. Esto permitir\xe1 un alto nivel de personalizaci\xf3n en t\xe9rminos de almacenamiento en cach\xe9, enrutamiento especial, http2, etc."}),Object(J.jsxs)("p",{children:["Tenga en cuenta que las plantillas se construyen utilizando el patr\xf3n de plantilla EJS. Hacer no cambiar las \xe1reas entre ",Object(J.jsx)("code",{children:"<%"})," y"," ",Object(J.jsx)("code",{children:"%>"})," a menos que realmente sepa lo que est\xe1 haciendo."]}),Object(J.jsx)("br",{}),Object(J.jsxs)("p",{children:[Object(J.jsx)("b",{children:"Ubicaci\xf3n de configuraci\xf3n base en contenedor nginx"}),": /etc/nginx/nginx.conf"]}),Object(J.jsxs)("div",{className:t.baseConfig.customValue||t.captainConfig.customValue?"":"hide-on-demand",children:[Object(J.jsx)(y.a.TextArea,{className:"code-input",placeholder:"",rows:17,value:t.baseConfig.customValue,onChange:function(a){var n=G.copyObject(t);n.baseConfig.customValue=a.target.value,e.setState({nginxConfig:n})}}),Object(J.jsx)("div",{style:{height:40}})]}),Object(J.jsxs)("p",{children:[Object(J.jsx)("b",{children:"Ubicaci\xf3n de configuraci\xf3n de CapRover en contenedor nginx"}),": /etc/nginx/conf.d/captain-root.conf"]}),Object(J.jsx)("div",{className:t.baseConfig.customValue||t.captainConfig.customValue?"":"hide-on-demand",children:Object(J.jsx)(y.a.TextArea,{className:"code-input",placeholder:"",rows:17,value:t.captainConfig.customValue,onChange:function(a){var n=G.copyObject(t);n.captainConfig.customValue=a.target.value,e.setState({nginxConfig:n})}})}),Object(J.jsx)("div",{style:{height:40}}),Object(J.jsxs)("div",{children:[Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsx)(D.a,{type:"default",block:this.props.isMobile,onClick:function(){return e.onLoadDefaultNginxConfigClicked()},children:"Cargar predeterminado y editar"})}),Object(J.jsx)("div",{style:{height:20}}),Object(J.jsx)(k.a,{justify:"end",children:Object(J.jsxs)(D.a,{type:"primary",block:this.props.isMobile,onClick:function(){return e.onUpdateNginxConfigClicked()},children:[Object(J.jsx)("span",{children:Object(J.jsx)(ua.a,{})})," ","\xa0 Guardar y actualizar"]})})]})]}):Object(J.jsx)(Ie,{})}}]),a}(Y),en=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)("div",{children:Object(J.jsxs)(k.a,{justify:"center",gutter:20,children:[Object(J.jsx)(de.a,{style:{marginBottom:20},lg:{span:10},xs:{span:23},children:Object(J.jsx)(x.a,{style:{height:"100%"},title:"Buscar actualizaciones",children:Object(J.jsx)($a,{isMobile:this.props.isMobile})})}),Object(J.jsx)(de.a,{style:{marginBottom:20},lg:{span:10},xs:{span:23},children:Object(J.jsx)(x.a,{style:{height:"100%"},title:"Backup",children:Object(J.jsx)(Ga,{isMobile:this.props.isMobile})})}),Object(J.jsx)(de.a,{style:{marginBottom:20},lg:{span:20},xs:{span:23},children:Object(J.jsx)(x.a,{style:{height:"100%"},title:"Configuraciones de NGINX",children:Object(J.jsx)(Za,{isMobile:this.props.isMobile})})}),Object(J.jsx)(de.a,{style:{marginBottom:20},lg:{span:6},xs:{span:23},children:Object(J.jsx)(x.a,{style:{height:"100%"},title:"Cambiar contrase\xf1a",children:Object(J.jsx)(Ya,{isMobile:this.props.isMobile})})}),Object(J.jsx)(de.a,{style:{marginBottom:20},lg:{span:14},xs:{span:23},children:Object(J.jsx)(x.a,{style:{height:"100%"},title:"Limpiar disco",children:Object(J.jsx)(Qa,{isMobile:this.props.isMobile})})})]})})}}]),a}(n.Component);var tn=Object(u.b)((function(e){return{isMobile:e.globalReducer.isMobile}}),void 0)(en),an=le.a.Header,nn=le.a.Content,sn=le.a.Sider,rn=[{key:"dashboard",name:"Dashboard",icon:Object(J.jsx)(Z.a,{})},{key:"apps",name:"Apps",icon:Object(J.jsx)(ee.a,{})},{key:"monitoring",name:"Monitorizci\xf3n",icon:Object(J.jsx)(te.a,{})},{key:"cluster",name:"Cluster",icon:Object(J.jsx)(ae.a,{})},{key:"settings",name:"Ajustes",icon:Object(J.jsx)(ne.a,{})}],on=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).mainContainer=void 0,n.updateDimensions=function(){return n.props.emitSizeChanged()},n.toggleSider=function(){V.setSiderCollapsedStateInLocalStorage(!n.state.collapsed),n.setState({collapsed:!n.state.collapsed})},n.mainContainer=i.a.createRef(),n.state={versionInfo:void 0,collapsed:!1},n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this)&&Object(g.a)(Object(O.a)(a.prototype),"componentWillUnmount",this).call(this),this.updateDimensions(),window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.props.isMobile&&this.setState({collapsed:!0})}},{key:"componentDidMount",value:function(){var e=this;this.updateDimensions(),window.addEventListener("resize",this.updateDimensions),W.isLoggedIn()?(this.apiManager.getVersionInfo().then((function(t){e.setState({versionInfo:t})})).catch((function(e){})),this.setState({collapsed:V.getSiderCollapsedStateFromLocalStorage()})):this.goToLogin()}},{key:"goToLogin",value:function(){this.props.history.push("/login")}},{key:"createUpdateAvailableIfNeeded",value:function(){var e=this;if(e.state.versionInfo&&e.state.versionInfo.canUpdate)return Object(J.jsx)(n.Fragment,{children:Object(J.jsxs)(Ne,{onLinkClicked:function(){return e.props.history.push("/settings")},children:[Object(J.jsx)(ie.a,{style:{marginLeft:50}}),Object(J.jsx)(ie.a,{style:{marginRight:10,marginLeft:3}}),"Update Available!",Object(J.jsx)(ie.a,{style:{marginLeft:10}}),Object(J.jsx)(ie.a,{style:{marginLeft:3}})]})})}},{key:"render",value:function(){var e=this,t=this;return Object(J.jsxs)(le.a,{className:"full-screen",children:[Object(J.jsx)(an,{className:"navbar",style:{padding:"0 ".concat(this.props.isMobile?15:50,"px")},children:Object(J.jsx)("div",{children:Object(J.jsxs)(k.a,{children:[this.props.isMobile&&Object(J.jsx)(de.a,{span:4,children:Object(J.jsx)(D.a,{ghost:!0,icon:Object(J.jsx)(se.a,{style:{color:"black",fontWeight:600}}),onClick:this.toggleSider})}),this.props.isMobile&&t.createUpdateAvailableIfNeeded()||Object(J.jsx)(de.a,{lg:{span:12},xs:{span:20},children:Object(J.jsxs)("div",{children:[Object(J.jsx)("img",{alt:"logo",src:"/icon-512x512.png",style:{height:45,marginRight:10}}),t.createUpdateAvailableIfNeeded()]})}),!t.props.isMobile&&Object(J.jsx)(de.a,{span:12,children:Object(J.jsxs)(k.a,{justify:"end",children:[Object(J.jsx)(Ee,{url:"https://github.com/itzvicen",children:Object(J.jsx)("span",{style:{marginRight:20},className:"links-nav",children:"GitHub"})}),Object(J.jsx)("span",{className:"links-nav",style:{marginRight:70},children:Object(J.jsx)(Ee,{url:"https://spacecloud.live",children:"Inicio"})}),Object(J.jsx)("span",{style:{marginRight:70},children:Object(J.jsx)(la,{})}),Object(J.jsx)("span",{children:Object(J.jsx)("span",{style:{border:"1px solid #1b8ad3",borderRadius:4,padding:8},children:Object(J.jsxs)(Ne,{onLinkClicked:function(){t.apiManager.setAuthToken(""),t.goToLogin()},children:["Salir ",Object(J.jsx)(re.a,{})]})})})]})})]})})}),Object(J.jsxs)(le.a,{children:[Object(J.jsx)(sn,{breakpoint:"lg",trigger:this.props.isMobile&&void 0,collapsible:!0,collapsed:this.state.collapsed,width:200,collapsedWidth:t.props.isMobile?0:80,style:{zIndex:2},onCollapse:this.toggleSider,children:Object(J.jsxs)(pe.a,{selectedKeys:[this.props.location.pathname.substring(1)],theme:"light",mode:"inline",defaultSelectedKeys:["dashboard"],style:{height:"100%",borderRight:0},children:[rn.map((function(e){return Object(J.jsx)(pe.a.Item,{className:"aside-links",children:Object(J.jsxs)(h.b,{to:"/".concat(e.key),className:"nav-text",children:[e.icon,Object(J.jsx)("span",{children:e.name})]})},e.key)})),this.props.isMobile&&Object(J.jsxs)(n.Fragment,{children:[Object(J.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.85)",height:1,width:"80%",margin:"15px auto"}}),Object(J.jsx)("div",{className:"ant-menu-item",role:"menuitem",style:{paddingLeft:24},children:Object(J.jsxs)(Ee,{url:"https://github.com/itzvicen",children:[Object(J.jsx)(oe.a,{style:{paddingRight:10}}),"GitHub"]})}),Object(J.jsx)("div",{className:"ant-menu-item",role:"menuitem",style:{paddingLeft:24},children:Object(J.jsxs)(Ee,{url:"https://spacecloud.live",children:[Object(J.jsx)(ce.a,{style:{paddingRight:10}}),"Inicio"]})}),Object(J.jsx)("div",{className:"ant-menu-item",role:"menuitem",style:{paddingLeft:24},children:Object(J.jsxs)(Ne,{onLinkClicked:function(){e.apiManager.setAuthToken(""),e.goToLogin()},children:[" ",Object(J.jsx)(re.a,{style:{paddingRight:10}}),"Salir"]})})]})]})}),Object(J.jsx)(nn,{children:Object(J.jsx)("div",{ref:t.mainContainer,style:{paddingTop:12,paddingBottom:36,height:"100%",overflowY:"scroll",marginRight:t.state.collapsed?0:t.props.isMobile?-200:0,transition:"margin-right 0.3s ease"},id:"main-content-layout",children:Object(J.jsxs)(j.e,{children:[Object(J.jsx)(j.c,{path:"/dashboard/",component:sa}),Object(J.jsx)(j.c,{path:"/apps/details/:appName",render:function(e){return Object(J.jsx)(gt,Object(T.a)(Object(T.a)({},e),{},{mainContainer:t.mainContainer}))}}),Object(J.jsx)(j.c,{path:"/apps/oneclick/:appName",component:aa}),Object(J.jsx)(j.c,{path:"/apps/oneclick",component:Ft}),Object(J.jsx)(j.c,{path:"/apps/",component:Pt}),Object(J.jsx)(j.c,{path:"/monitoring/",component:ka}),Object(J.jsx)(j.c,{path:"/cluster/",component:Ka}),Object(J.jsx)(j.c,{path:"/settings/",component:tn}),Object(J.jsx)(j.c,{path:"/",component:da})]})},t.props.rootElementKey)})]})]})}}]),a}(Y);var cn=Object(u.b)((function(e){return{rootElementKey:e.globalReducer.rootElementKey,isMobile:e.globalReducer.isMobile}}),{emitSizeChanged:function(){return{type:he,payload:{}}}})(on),ln=Object(b.b)({registryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ca:return Object(T.a)(Object(T.a)({},e),{},{defaultRegistryId:t.payload});default:return e}},globalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(T.a)(Object(T.a)({},e),{},{rootElementKey:G.generateUuidV4()});case he:return Object(T.a)(Object(T.a)({},e),{},{isMobile:G.isMobile()});default:return e}}});P().init();var dn=Object(b.a)(m.a)(b.c)(ln),pn={dark:"dark-theme.css",light:"light-theme.css"},un=function(){return"loading"===Object(p.b)().status?Object(J.jsx)("div",{}):Object(J.jsx)("div",{className:"full-screen",children:Object(J.jsx)(h.a,{children:Object(J.jsxs)(j.e,{children:[Object(J.jsx)(j.c,{path:"/login/",component:$}),Object(J.jsx)(j.c,{path:"/",component:cn})]})})})},hn=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isDarkMode:V.getDarkModeFromLocalStorage()},n}return Object(c.a)(a,[{key:"render",value:function(){return Object(J.jsx)(p.a,{themeMap:pn,defaultTheme:this.state.isDarkMode?"dark":"light",insertionPoint:"styles-insertion-point",children:Object(J.jsx)(u.a,{store:dn,children:Object(J.jsx)(un,{})})})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(J.jsx)(hn,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[689,1,2]]]);
//# sourceMappingURL=main.5a028ee6.chunk.js.map